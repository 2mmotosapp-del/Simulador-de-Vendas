<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SIMULADOR DE VENDAS MOTOTECH</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #0a0a1a;
            --secondary: #11112e;
            --accent: #00ffea;
            --accent-light: #80ffea;
            --success: #00ff88;
            --warning: #ffaa00;
            --danger: #ff0055;
            --info: #0088ff;
            --sim1-color: #00ffaa;
            --sim2-color: #0088ff;
            --text: #ffffff;
            --text-light: #b0c0ff;
            --card-bg: rgba(10, 10, 26, 0.95);
            --border: rgba(0, 255, 234, 0.3);
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.7);
            --transition: all 0.3s ease;
            --gradient: linear-gradient(135deg, #00ffea 0%, #0088ff 100%);
            --neon-glow: 0 0 15px rgba(0, 255, 234, 0.7), 0 0 30px rgba(0, 255, 234, 0.5);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background: radial-gradient(circle at center, #11112e 0%, #0a0a1a 100%);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            position: relative;
        }

        /* Header */
        header {
            text-align: center;
            padding: 20px 0;
            margin-bottom: 30px;
            position: relative;
            min-height: 120px;
        }

        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: 15px;
        }

        .logo {
            height: 60px;
            width: auto;
            filter: drop-shadow(0 0 15px rgba(0, 255, 234, 0.7));
        }

        .logo-text {
            font-family: 'Orbitron', sans-serif;
            font-weight: 900;
            font-size: 2.8rem;
            background: linear-gradient(135deg, #00ffea, #0088ff, #00ffaa);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            letter-spacing: 3px;
            text-transform: uppercase;
            animation: textGlow 2s infinite alternate;
            text-shadow: 0 0 20px rgba(0, 255, 234, 0.5);
        }

        .system-name {
            font-family: 'Orbitron', sans-serif;
            font-weight: 500;
            font-size: 1.1rem;
            color: var(--text-light);
            letter-spacing: 2px;
            margin-top: 5px;
            animation: pulse 2s infinite;
        }

        @keyframes textGlow {
            0% { text-shadow: 0 0 10px rgba(0, 255, 234, 0.5); }
            100% { text-shadow: 0 0 25px rgba(0, 255, 234, 0.8), 0 0 40px rgba(0, 136, 255, 0.6); }
        }

        @keyframes pulse {
            0% { opacity: 0.8; }
            50% { opacity: 1; }
            100% { opacity: 0.8; }
        }

        /* Botões Flutuantes */
        .floating-buttons {
            position: fixed;
            bottom: 30px;
            right: 30px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            z-index: 1000;
        }

        .floating-btn {
            width: 65px;
            height: 65px;
            border-radius: 50%;
            border: none;
            background: rgba(0, 0, 0, 0.8);
            color: var(--accent);
            font-size: 1.6rem;
            cursor: pointer;
            box-shadow: var(--neon-glow);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 255, 234, 0.3);
        }

        .floating-btn:hover {
            transform: translateY(-5px) scale(1.1);
            box-shadow: 0 0 25px rgba(0, 255, 234, 0.9), 0 0 40px rgba(0, 255, 234, 0.6);
            background: rgba(0, 255, 234, 0.1);
        }

        .floating-btn.calculator {
            color: var(--accent);
        }

        .floating-btn.config {
            color: #ff00ff;
            box-shadow: 0 0 15px rgba(255, 0, 255, 0.7), 0 0 30px rgba(255, 0, 255, 0.5);
        }

        .floating-btn.config:hover {
            box-shadow: 0 0 25px rgba(255, 0, 255, 0.9), 0 0 40px rgba(255, 0, 255, 0.6);
        }

        .floating-btn.management {
            color: #ffaa00;
            box-shadow: 0 0 15px rgba(255, 170, 0, 0.7), 0 0 30px rgba(255, 170, 0, 0.5);
        }

        .floating-btn.management:hover {
            box-shadow: 0 0 25px rgba(255, 170, 0, 0.9), 0 0 40px rgba(255, 170, 0, 0.6);
        }

        .btn-label {
            position: absolute;
            right: 75px;
            background: rgba(0, 0, 0, 0.9);
            padding: 10px 20px;
            border-radius: 10px;
            font-size: 0.9rem;
            white-space: nowrap;
            opacity: 0;
            transition: opacity 0.3s;
            pointer-events: none;
            border: 1px solid var(--border);
            font-family: 'Orbitron', sans-serif;
            letter-spacing: 1px;
            color: var(--accent);
            backdrop-filter: blur(10px);
            box-shadow: var(--neon-glow);
        }

        .floating-btn:hover .btn-label {
            opacity: 1;
        }

        /* Card de Velocímetro da Internet */
        .speedometer-container {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(10, 10, 26, 0.9);
            border-radius: 15px;
            padding: 15px 20px;
            box-shadow: var(--neon-glow);
            border: 1px solid rgba(0, 255, 234, 0.3);
            backdrop-filter: blur(10px);
            min-width: 220px;
            z-index: 100;
            animation: float 6s ease-in-out infinite;
        }

        .speedometer-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(0, 255, 234, 0.2);
        }

        .speedometer-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 0.9rem;
            color: var(--accent);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .speedometer-refresh {
            background: none;
            border: none;
            color: var(--accent);
            cursor: pointer;
            transition: all 0.3s;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .speedometer-refresh:hover {
            background: rgba(0, 255, 234, 0.1);
            transform: rotate(180deg);
        }

        .speedometer-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .speedometer-item {
            text-align: center;
        }

        .speedometer-label {
            font-size: 0.8rem;
            color: var(--text-light);
            margin-bottom: 5px;
            font-family: 'Orbitron', sans-serif;
            letter-spacing: 1px;
        }

        .speedometer-value {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--accent);
            text-shadow: 0 0 10px var(--accent);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }

        .speedometer-unit {
            font-size: 0.9rem;
            color: var(--text-light);
        }

        .speedometer-icon {
            font-size: 1.2rem;
        }

        /* Animação para teste de velocidade */
        @keyframes speedTest {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .testing {
            animation: speedTest 1s infinite;
            color: var(--warning);
        }

        /* Índice de qualidade da conexão */
        .connection-quality {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
            margin-top: 10px;
        }

        .quality-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transition: all 0.3s;
        }

        .quality-dot.active {
            background: var(--success);
            box-shadow: 0 0 10px var(--success);
        }

        .quality-dot.active.good { background: var(--success); }
        .quality-dot.active.medium { background: var(--warning); }
        .quality-dot.active.poor { background: var(--danger); }

        /* Status de Conexão */
        .status-card {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(10, 10, 26, 0.9);
            border-radius: 15px;
            padding: 15px 20px;
            box-shadow: var(--neon-glow);
            border: 1px solid rgba(0, 255, 234, 0.3);
            backdrop-filter: blur(10px);
            min-width: 220px;
            z-index: 100;
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }

        .connection-status {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background-color: var(--success);
            box-shadow: 0 0 15px var(--success);
            animation: pulse 2s infinite;
        }

        .status-text {
            font-family: 'Orbitron', sans-serif;
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--success);
            text-shadow: 0 0 10px var(--success);
        }

        .datetime-card {
            text-align: center;
        }

        .date {
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--text-light);
            font-family: 'Orbitron', sans-serif;
        }

        .time {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--accent);
            margin-top: 5px;
            font-family: 'Orbitron', sans-serif;
            text-shadow: 0 0 10px rgba(0, 255, 234, 0.7);
        }

        /* Dashboard Stats */
        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 40px;
            margin-top: 100px;
        }

        @media (max-width: 768px) {
            .dashboard-stats {
                grid-template-columns: 1fr;
                margin-top: 80px;
            }
            
            .status-card, .speedometer-container {
                position: relative;
                top: 0;
                right: 0;
                left: 0;
                margin: 0 auto 20px;
                width: 100%;
                animation: none;
            }
            
            .floating-buttons {
                bottom: 20px;
                right: 20px;
            }
            
            .floating-btn {
                width: 55px;
                height: 55px;
                font-size: 1.4rem;
            }
            
            .btn-label {
                display: none;
            }
            
            .logo-text {
                font-size: 2rem;
            }
            
            header {
                min-height: auto;
            }
        }

        .stat-card {
            background: rgba(10, 10, 26, 0.8);
            border-radius: 15px;
            padding: 25px;
            box-shadow: var(--neon-glow);
            border: 1px solid rgba(0, 255, 234, 0.2);
            transition: var(--transition);
            backdrop-filter: blur(10px);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 255, 234, 0.1), transparent);
            transition: left 0.7s;
        }

        .stat-card:hover::before {
            left: 100%;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 255, 234, 0.4);
        }

        .stat-value {
            font-family: 'Orbitron', sans-serif;
            font-size: 2.5rem;
            font-weight: 700;
            margin: 10px 0;
            color: var(--accent);
            text-shadow: 0 0 10px rgba(0, 255, 234, 0.7);
        }

        .stat-label {
            color: var(--text-light);
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-family: 'Orbitron', sans-serif;
        }

        /* Layout Principal */
        .main-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        @media (max-width: 1100px) {
            .main-layout {
                grid-template-columns: 1fr;
            }
        }

        /* Cards de Simulação */
        .simulation-card {
            background: rgba(10, 10, 26, 0.8);
            border-radius: 20px;
            padding: 30px;
            box-shadow: var(--neon-glow);
            border: 1px solid rgba(0, 255, 234, 0.2);
            transition: var(--transition);
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }

        .simulation-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
        }

        .simulation-card.simulacao-1::before {
            background: linear-gradient(90deg, var(--sim1-color), #00ff88);
            box-shadow: 0 0 10px var(--sim1-color);
        }

        .simulation-card.simulacao-2::before {
            background: linear-gradient(90deg, var(--sim2-color), #0088ff);
            box-shadow: 0 0 10px var(--sim2-color);
        }

        .simulation-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 255, 234, 0.4);
        }

        .simulation-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(0, 255, 234, 0.2);
        }

        .simulation-title {
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            font-size: 1.8rem;
            color: var(--accent);
            display: flex;
            align-items: center;
            gap: 10px;
            text-shadow: 0 0 10px rgba(0, 255, 234, 0.5);
        }

        .simulation-number {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--accent), #0088ff);
            border-radius: 50%;
            font-size: 1.2rem;
            font-weight: 900;
            color: var(--primary);
            box-shadow: 0 0 10px var(--accent);
        }

        /* Resultados */
        .results-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-top: 25px;
        }

        .result-item {
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            border: 1px solid rgba(0, 255, 234, 0.2);
            transition: var(--transition);
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(5px);
        }

        .simulacao-1 .result-item {
            border-color: rgba(0, 255, 170, 0.3);
        }

        .simulacao-2 .result-item {
            border-color: rgba(0, 136, 255, 0.3);
        }

        .result-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 255, 234, 0.3);
        }

        .result-label {
            font-family: 'Orbitron', sans-serif;
            font-size: 0.9rem;
            color: var(--text-light);
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .result-value {
            font-family: 'Orbitron', sans-serif;
            font-size: 2.2rem;
            font-weight: 700;
            text-shadow: 0 0 10px currentColor;
            animation: valueGlow 2s infinite alternate;
        }

        @keyframes valueGlow {
            0% { text-shadow: 0 0 10px currentColor; }
            100% { text-shadow: 0 0 20px currentColor, 0 0 30px currentColor; }
        }

        .simulacao-1 .result-value {
            color: var(--sim1-color);
        }

        .simulacao-2 .result-value {
            color: var(--sim2-color);
        }

        /* Formulário */
        .form-container {
            background: rgba(10, 10, 26, 0.8);
            border-radius: 20px;
            padding: 30px;
            box-shadow: var(--neon-glow);
            border: 1px solid rgba(0, 255, 234, 0.2);
            margin-bottom: 40px;
            backdrop-filter: blur(10px);
        }

        .form-title {
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            font-size: 1.8rem;
            color: var(--accent);
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            gap: 15px;
            text-shadow: 0 0 10px rgba(0, 255, 234, 0.5);
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-label {
            margin-bottom: 10px;
            font-weight: 500;
            color: var(--text-light);
            display: flex;
            align-items: center;
            gap: 8px;
            font-family: 'Orbitron', sans-serif;
        }

        .form-input, .form-select {
            padding: 15px;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(0, 255, 234, 0.3);
            border-radius: 10px;
            color: var(--text);
            font-size: 1rem;
            transition: var(--transition);
            font-family: 'Orbitron', sans-serif;
        }

        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(0, 255, 234, 0.2);
            background: rgba(0, 255, 234, 0.1);
        }

        /* Campos específicos para entradas */
        .input-group {
            display: flex;
            align-items: center;
            position: relative;
        }

        .input-group .form-input {
            flex: 1;
            padding-right: 40px;
        }

        .input-suffix {
            position: absolute;
            right: 15px;
            color: var(--accent);
            font-weight: 500;
            font-family: 'Orbitron', sans-serif;
        }

        .simulation-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            border: 1px solid rgba(0, 255, 234, 0.2);
        }

        @media (max-width: 768px) {
            .simulation-inputs {
                grid-template-columns: 1fr;
            }
        }

        .input-card {
            padding: 20px;
            border-radius: 10px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(0, 255, 234, 0.2);
        }

        .input-card.simulacao-1 {
            border-left: 4px solid var(--sim1-color);
        }

        .input-card.simulacao-2 {
            border-left: 4px solid var(--sim2-color);
        }

        /* Slider para porcentagem */
        .percentage-slider {
            margin-top: 15px;
        }

        .slider-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .slider-value {
            min-width: 60px;
            text-align: center;
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            color: var(--sim1-color);
            font-size: 1.2rem;
            text-shadow: 0 0 10px var(--sim1-color);
        }

        input[type="range"] {
            flex: 1;
            -webkit-appearance: none;
            height: 8px;
            border-radius: 4px;
            background: linear-gradient(90deg, #000, #00ffaa);
            outline: none;
            box-shadow: 0 0 5px rgba(0, 255, 170, 0.5);
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            background: var(--sim1-color);
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 0 15px var(--sim1-color);
        }

        .simulacao-2 input[type="range"] {
            background: linear-gradient(90deg, #000, #0088ff);
        }

        .simulacao-2 input[type="range"]::-webkit-slider-thumb {
            background: var(--sim2-color);
            box-shadow: 0 0 15px var(--sim2-color);
        }

        /* Botões */
        .buttons-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
        }

        .btn {
            padding: 15px 35px;
            border: none;
            border-radius: 12px;
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            letter-spacing: 1px;
            text-transform: uppercase;
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(10px);
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.7s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: linear-gradient(135deg, rgba(0, 255, 234, 0.2), rgba(0, 136, 255, 0.2));
            color: var(--accent);
            border: 2px solid var(--accent);
            box-shadow: var(--neon-glow);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(0, 255, 234, 0.4);
            background: linear-gradient(135deg, rgba(0, 255, 234, 0.3), rgba(0, 136, 255, 0.3));
        }

        .btn-secondary {
            background: rgba(0, 0, 0, 0.5);
            color: var(--text);
            border: 2px solid rgba(0, 255, 234, 0.3);
        }

        .btn-secondary:hover {
            background: rgba(0, 255, 234, 0.1);
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 255, 234, 0.2);
        }

        .btn-danger {
            background: linear-gradient(135deg, rgba(255, 0, 85, 0.2), rgba(255, 0, 85, 0.1));
            color: var(--danger);
            border: 2px solid var(--danger);
            box-shadow: 0 0 15px rgba(255, 0, 85, 0.5);
        }

        .btn-danger:hover {
            background: linear-gradient(135deg, rgba(255, 0, 85, 0.3), rgba(255, 0, 85, 0.2));
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(255, 0, 85, 0.4);
        }

        /* Botão de remover orçamento */
        .orcamento-actions {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            justify-content: flex-end;
        }

        .action-btn {
            padding: 8px 15px;
            border-radius: 8px;
            border: none;
            font-family: 'Orbitron', sans-serif;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
            letter-spacing: 1px;
        }

        .action-btn.delete {
            background: rgba(255, 0, 85, 0.2);
            color: var(--danger);
            border: 1px solid var(--danger);
        }

        .action-btn.delete:hover {
            background: rgba(255, 0, 85, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 0, 85, 0.3);
        }

        .action-btn.view {
            background: rgba(0, 255, 234, 0.2);
            color: var(--accent);
            border: 1px solid var(--accent);
        }

        .action-btn.view:hover {
            background: rgba(0, 255, 234, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 255, 234, 0.3);
        }

        /* Calculadora Futurista */
        .calculator-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
        }

        .calculator-container {
            background: linear-gradient(145deg, #0a0a1a, #11112e);
            border-radius: 25px;
            padding: 30px;
            box-shadow: 
                0 0 50px rgba(0, 255, 234, 0.5),
                0 0 100px rgba(0, 136, 255, 0.3),
                inset 0 0 20px rgba(0, 255, 234, 0.1);
            border: 2px solid rgba(0, 255, 234, 0.3);
            width: 90%;
            max-width: 400px;
            position: relative;
            animation: calculatorAppear 0.5s ease-out;
        }

        @keyframes calculatorAppear {
            0% { 
                transform: scale(0.8) translateY(50px);
                opacity: 0;
            }
            100% { 
                transform: scale(1) translateY(0);
                opacity: 1;
            }
        }

        .calculator-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(0, 255, 234, 0.3);
        }

        .calculator-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.8rem;
            color: var(--accent);
            text-shadow: 0 0 15px var(--accent);
            letter-spacing: 2px;
        }

        .close-calculator {
            background: none;
            border: none;
            color: var(--accent);
            font-size: 2rem;
            cursor: pointer;
            transition: all 0.3s;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-calculator:hover {
            background: rgba(0, 255, 234, 0.1);
            transform: rotate(90deg);
            box-shadow: 0 0 15px var(--accent);
        }

        .calculator-display {
            background: rgba(0, 0, 0, 0.7);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            text-align: right;
            font-family: 'Orbitron', sans-serif;
            font-size: 2.5rem;
            color: var(--accent);
            min-height: 100px;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            overflow: hidden;
            border: 2px solid rgba(0, 255, 234, 0.3);
            box-shadow: inset 0 0 20px rgba(0, 255, 234, 0.2);
            position: relative;
        }

        .calculator-expression {
            font-size: 1rem;
            color: var(--text-light);
            min-height: 20px;
            opacity: 0.8;
        }

        .calculator-result {
            text-shadow: 0 0 15px var(--accent);
            animation: resultGlow 2s infinite alternate;
        }

        @keyframes resultGlow {
            0% { text-shadow: 0 0 15px var(--accent); }
            100% { text-shadow: 0 0 25px var(--accent), 0 0 40px var(--accent); }
        }

        .calculator-buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
        }

        .calc-btn {
            padding: 20px;
            border-radius: 15px;
            border: none;
            background: rgba(0, 0, 0, 0.6);
            color: white;
            font-family: 'Orbitron', sans-serif;
            font-size: 1.3rem;
            cursor: pointer;
            transition: all 0.2s;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 255, 234, 0.2);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .calc-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 255, 234, 0.3);
            background: rgba(0, 255, 234, 0.1);
        }

        .calc-btn:active {
            transform: translateY(0);
        }

        .calc-btn.operator {
            background: linear-gradient(135deg, rgba(0, 136, 255, 0.3), rgba(0, 136, 255, 0.1));
            color: var(--sim2-color);
            border-color: var(--sim2-color);
        }

        .calc-btn.equals {
            background: linear-gradient(135deg, rgba(0, 255, 170, 0.3), rgba(0, 255, 170, 0.1));
            color: var(--sim1-color);
            border-color: var(--sim1-color);
            grid-column: span 2;
        }

        .calc-btn.clear {
            background: linear-gradient(135deg, rgba(255, 0, 85, 0.3), rgba(255, 0, 85, 0.1));
            color: var(--danger);
            border-color: var(--danger);
        }

        /* Modal de Código de Acesso */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
        }

        .modal-content {
            background: linear-gradient(145deg, #0a0a1a, #11112e);
            border-radius: 25px;
            width: 90%;
            max-width: 500px;
            padding: 40px;
            box-shadow: 
                0 0 50px rgba(0, 255, 234, 0.5),
                0 0 100px rgba(0, 136, 255, 0.3);
            border: 2px solid rgba(0, 255, 234, 0.3);
            position: relative;
            animation: modalAppear 0.5s ease-out;
        }

        @keyframes modalAppear {
            0% { 
                transform: scale(0.8) translateY(50px);
                opacity: 0;
            }
            100% { 
                transform: scale(1) translateY(0);
                opacity: 1;
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid rgba(0, 255, 234, 0.3);
        }

        .modal-title {
            font-size: 2rem;
            color: var(--accent);
            font-weight: 700;
            font-family: 'Orbitron', sans-serif;
            text-shadow: 0 0 15px var(--accent);
            letter-spacing: 2px;
        }

        .close-modal {
            background: none;
            border: none;
            color: var(--text);
            font-size: 2rem;
            cursor: pointer;
            transition: all 0.3s;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-modal:hover {
            color: var(--accent);
            background: rgba(0, 255, 234, 0.1);
            transform: rotate(90deg);
            box-shadow: 0 0 15px var(--accent);
        }

        .code-input-container {
            margin-bottom: 30px;
        }

        .code-input-label {
            display: block;
            margin-bottom: 15px;
            font-size: 1.2rem;
            color: var(--text-light);
            font-family: 'Orbitron', sans-serif;
            letter-spacing: 1px;
        }

        .code-input {
            width: 100%;
            padding: 20px;
            border-radius: 15px;
            border: 2px solid var(--sim2-color);
            background: rgba(0, 0, 0, 0.7);
            color: var(--accent);
            font-size: 1.5rem;
            letter-spacing: 8px;
            text-align: center;
            outline: none;
            transition: all 0.3s;
            font-family: 'Orbitron', sans-serif;
            box-shadow: inset 0 0 20px rgba(0, 136, 255, 0.2);
        }

        .code-input:focus {
            border-color: var(--sim1-color);
            box-shadow: 
                0 0 20px var(--sim1-color),
                inset 0 0 20px rgba(0, 255, 170, 0.2);
        }

        .modal-btn {
            width: 100%;
            padding: 20px;
            border-radius: 15px;
            border: none;
            background: linear-gradient(135deg, var(--sim2-color), #3a0ca3);
            color: white;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
            font-family: 'Orbitron', sans-serif;
            letter-spacing: 2px;
            text-transform: uppercase;
            box-shadow: 0 10px 20px rgba(0, 136, 255, 0.4);
        }

        .modal-btn:hover {
            background: linear-gradient(135deg, #3a0ca3, var(--sim2-color));
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(0, 136, 255, 0.6);
        }

        .modal-message {
            text-align: center;
            margin-top: 20px;
            min-height: 30px;
            font-weight: 500;
            font-family: 'Orbitron', sans-serif;
            font-size: 1.1rem;
        }

        .success {
            color: var(--success);
            text-shadow: 0 0 10px var(--success);
        }

        .error {
            color: var(--danger);
            text-shadow: 0 0 10px var(--danger);
        }

        /* Pop-up de Configurações e Gestão */
        .popup-container {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
        }

        .popup-content {
            background: linear-gradient(145deg, #0a0a1a, #11112e);
            border-radius: 25px;
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            padding: 30px;
            box-shadow: 
                0 0 50px rgba(0, 255, 234, 0.5),
                0 0 100px rgba(0, 136, 255, 0.3);
            border: 2px solid rgba(0, 255, 234, 0.3);
            position: relative;
            overflow-y: auto;
            animation: popupAppear 0.5s ease-out;
        }

        @keyframes popupAppear {
            0% { 
                transform: scale(0.9) translateY(50px);
                opacity: 0;
            }
            100% { 
                transform: scale(1) translateY(0);
                opacity: 1;
            }
        }

        .popup-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(0, 255, 234, 0.3);
        }

        .popup-title {
            font-size: 2rem;
            color: var(--accent);
            font-weight: 700;
            font-family: 'Orbitron', sans-serif;
            text-shadow: 0 0 15px var(--accent);
            letter-spacing: 2px;
        }

        .close-popup {
            background: none;
            border: none;
            color: var(--text);
            font-size: 2rem;
            cursor: pointer;
            transition: all 0.3s;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-popup:hover {
            color: var(--accent);
            background: rgba(0, 255, 234, 0.1);
            transform: rotate(90deg);
            box-shadow: 0 0 15px var(--accent);
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 30px 0;
            border-top: 1px solid rgba(0, 255, 234, 0.2);
            color: var(--text-light);
            font-size: 0.9rem;
            margin-top: 40px;
            backdrop-filter: blur(10px);
            border-radius: 15px;
            background: rgba(10, 10, 26, 0.5);
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 25px;
            margin-top: 15px;
        }

        .footer-links a {
            color: var(--accent);
            text-decoration: none;
            transition: var(--transition);
            font-family: 'Orbitron', sans-serif;
            font-weight: 500;
            letter-spacing: 1px;
        }

        .footer-links a:hover {
            color: var(--accent-light);
            text-shadow: 0 0 10px var(--accent);
        }

        /* Animações */
        .fade-in {
            animation: fadeIn 1s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Toast Notifications */
        .toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 10000;
        }

        .toast {
            background: rgba(10, 10, 26, 0.95);
            border-radius: 15px;
            padding: 15px 20px;
            margin-bottom: 10px;
            box-shadow: var(--neon-glow);
            border-left: 4px solid var(--success);
            display: flex;
            align-items: center;
            gap: 12px;
            min-width: 300px;
            transform: translateX(100%);
            opacity: 0;
            animation: slideIn 0.3s forwards, fadeOut 0.3s forwards 2.7s;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 255, 234, 0.2);
        }

        .toast.success {
            border-left-color: var(--success);
        }

        .toast.error {
            border-left-color: var(--danger);
        }

        .toast.warning {
            border-left-color: var(--warning);
        }

        .toast.info {
            border-left-color: var(--info);
        }

        @keyframes slideIn {
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes fadeOut {
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 1px solid rgba(0, 255, 234, 0.3);
            padding-bottom: 10px;
        }

        .tab {
            padding: 10px 20px;
            background: transparent;
            border: none;
            color: var(--text-light);
            cursor: pointer;
            border-radius: 5px;
            transition: var(--transition);
            font-family: 'Orbitron', sans-serif;
            font-weight: 500;
        }

        .tab.active {
            background: linear-gradient(135deg, rgba(0, 255, 234, 0.2), rgba(0, 136, 255, 0.2));
            color: var(--accent);
            box-shadow: 0 0 10px rgba(0, 255, 234, 0.5);
        }

        .tab:hover:not(.active) {
            background: rgba(255, 255, 255, 0.1);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Orçamentos */
        .orcamentos-container {
            background: rgba(10, 10, 26, 0.8);
            border-radius: 20px;
            padding: 30px;
            box-shadow: var(--neon-glow);
            border: 1px solid rgba(0, 255, 234, 0.2);
            margin-bottom: 40px;
            backdrop-filter: blur(10px);
        }

        .orcamentos-list {
            max-height: 400px;
            overflow-y: auto;
            margin-top: 20px;
        }

        .orcamento-item {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            border: 1px solid rgba(0, 255, 234, 0.2);
            transition: var(--transition);
            cursor: pointer;
            backdrop-filter: blur(5px);
        }

        .orcamento-item:hover {
            background: rgba(0, 255, 234, 0.1);
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0, 255, 234, 0.2);
        }

        .orcamento-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .orcamento-cliente {
            font-weight: 500;
            color: var(--accent);
            font-size: 1.1rem;
            font-family: 'Orbitron', sans-serif;
        }

        .orcamento-status {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
            text-transform: uppercase;
            font-family: 'Orbitron', sans-serif;
            letter-spacing: 1px;
        }

        .status-aprovado {
            background: rgba(0, 255, 136, 0.2);
            color: var(--success);
            border: 1px solid var(--success);
            box-shadow: 0 0 10px var(--success);
        }

        .status-pendente {
            background: rgba(255, 170, 0, 0.2);
            color: var(--warning);
            border: 1px solid var(--warning);
            box-shadow: 0 0 10px var(--warning);
            cursor: pointer;
        }

        .status-rejeitado {
            background: rgba(255, 0, 85, 0.2);
            color: var(--danger);
            border: 1px solid var(--danger);
            box-shadow: 0 0 10px var(--danger);
        }

        .orcamento-details {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            font-size: 0.9rem;
            color: var(--text-light);
        }

        .orcamento-value {
            color: var(--accent);
            font-weight: 500;
            font-family: 'Orbitron', sans-serif;
        }

        /* Modal de Alteração de Status */
        .status-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
        }

        .status-modal-content {
            background: linear-gradient(145deg, #0a0a1a, #11112e);
            border-radius: 25px;
            width: 90%;
            max-width: 500px;
            padding: 40px;
            box-shadow: 
                0 0 50px rgba(0, 255, 234, 0.5),
                0 0 100px rgba(0, 136, 255, 0.3);
            border: 2px solid rgba(0, 255, 234, 0.3);
            position: relative;
            animation: modalAppear 0.5s ease-out;
        }

        .status-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid rgba(0, 255, 234, 0.3);
        }

        .status-modal-title {
            font-size: 1.8rem;
            color: var(--accent);
            font-weight: 700;
            font-family: 'Orbitron', sans-serif;
            text-shadow: 0 0 15px var(--accent);
            letter-spacing: 2px;
        }

        .close-status-modal {
            background: none;
            border: none;
            color: var(--text);
            font-size: 2rem;
            cursor: pointer;
            transition: all 0.3s;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-status-modal:hover {
            color: var(--accent);
            background: rgba(0, 255, 234, 0.1);
            transform: rotate(90deg);
            box-shadow: 0 0 15px var(--accent);
        }

        .orcamento-info {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            border: 1px solid rgba(0, 255, 234, 0.2);
        }

        .orcamento-info h4 {
            color: var(--accent);
            margin-bottom: 15px;
            font-family: 'Orbitron', sans-serif;
        }

        .orcamento-info p {
            color: var(--text-light);
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
        }

        .orcamento-info p span {
            color: var(--text);
            font-weight: 500;
        }

        .status-options {
            display: flex;
            justify-content: space-around;
            gap: 20px;
            margin-top: 30px;
        }

        .status-option {
            flex: 1;
            padding: 25px 15px;
            border-radius: 15px;
            border: 2px solid;
            background: rgba(0, 0, 0, 0.3);
            color: white;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Orbitron', sans-serif;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .status-option.aprovar {
            border-color: var(--success);
            color: var(--success);
            box-shadow: 0 0 15px rgba(0, 255, 136, 0.3);
        }

        .status-option.aprovar:hover {
            background: rgba(0, 255, 136, 0.1);
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 255, 136, 0.5);
        }

        .status-option.rejeitar {
            border-color: var(--danger);
            color: var(--danger);
            box-shadow: 0 0 15px rgba(255, 0, 85, 0.3);
        }

        .status-option.rejeitar:hover {
            background: rgba(255, 0, 85, 0.1);
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(255, 0, 85, 0.5);
        }

        .status-option i {
            font-size: 2.5rem;
        }

        /* Responsividade */
        @media (max-width: 768px) {
            .results-grid {
                grid-template-columns: 1fr;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .buttons-container {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
                justify-content: center;
            }
            
            .orcamento-details {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .popup-content {
                padding: 20px;
                max-height: 90vh;
            }
            
            .calculator-container {
                padding: 20px;
            }
            
            .calculator-display {
                padding: 15px;
                font-size: 2rem;
            }
            
            .calc-btn {
                padding: 15px;
                font-size: 1.1rem;
            }
            
            .status-options {
                flex-direction: column;
            }
        }

        /* Novas adições */
        .loading-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 10, 26, 0.95);
            z-index: 9999;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 20px;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(0, 255, 234, 0.3);
            border-top: 5px solid var(--accent);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .tooltip {
            position: relative;
            display: inline-block;
            cursor: help;
        }

        .tooltip .tooltip-text {
            visibility: hidden;
            width: 200px;
            background-color: rgba(10, 10, 26, 0.95);
            color: var(--text-light);
            text-align: center;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
            border: 1px solid var(--border);
            backdrop-filter: blur(10px);
            font-size: 0.8rem;
            font-family: 'Roboto', sans-serif;
        }

        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        .input-error {
            border-color: var(--danger) !important;
            box-shadow: 0 0 10px rgba(255, 0, 85, 0.5) !important;
            animation: shake 0.5s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        .info-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 20px;
            height: 20px;
            background: var(--info);
            border-radius: 50%;
            color: var(--primary);
            font-size: 0.7rem;
            font-weight: bold;
            margin-left: 5px;
            cursor: help;
        }

        .comparison-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.7rem;
            font-weight: bold;
            font-family: 'Orbitron', sans-serif;
            letter-spacing: 1px;
            z-index: 10;
        }

        .comparison-badge.best {
            background: linear-gradient(135deg, var(--success), #00cc66);
            color: var(--primary);
            box-shadow: 0 0 10px var(--success);
        }

        .comparison-badge.worst {
            background: linear-gradient(135deg, var(--warning), #ff9900);
            color: var(--primary);
            box-shadow: 0 0 10px var(--warning);
        }
    </style>
</head>
<body>
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
        <div>Carregando simulações...</div>
    </div>

    <div class="container">
        <!-- Card de Velocímetro da Internet -->
        <div class="speedometer-container fade-in">
            <div class="speedometer-header">
                <div class="speedometer-title">
                    <i class="fas fa-wifi"></i>
                    INTERNET SPEED
                </div>
                <button class="speedometer-refresh" onclick="testarVelocidadeInternet()" title="Testar velocidade">
                    <i class="fas fa-sync-alt" id="speedRefreshIcon"></i>
                </button>
            </div>
            <div class="speedometer-content">
                <div class="speedometer-item">
                    <div class="speedometer-label">DOWNLOAD</div>
                    <div class="speedometer-value">
                        <i class="fas fa-download speedometer-icon"></i>
                        <span id="downloadSpeed">0</span>
                        <span class="speedometer-unit">Mbps</span>
                    </div>
                </div>
                <div class="speedometer-item">
                    <div class="speedometer-label">UPLOAD</div>
                    <div class="speedometer-value">
                        <i class="fas fa-upload speedometer-icon"></i>
                        <span id="uploadSpeed">0</span>
                        <span class="speedometer-unit">Mbps</span>
                    </div>
                </div>
            </div>
            <div class="connection-quality">
                <div class="quality-dot" id="qualityDot1"></div>
                <div class="quality-dot" id="qualityDot2"></div>
                <div class="quality-dot" id="qualityDot3"></div>
                <div class="quality-dot" id="qualityDot4"></div>
                <div class="quality-dot" id="qualityDot5"></div>
            </div>
        </div>

        <!-- Status de Conexão -->
        <div class="status-card fade-in">
            <div class="connection-status">
                <div class="status-indicator"></div>
                <span class="status-text">CONEXÃO BASEROW: ATIVA</span>
            </div>
            <div class="datetime-card">
                <div class="date" id="currentDate">Carregando...</div>
                <div class="time" id="currentTime">00:00:00</div>
            </div>
        </div>

        <!-- Cabeçalho -->
        <header class="fade-in">
            <div class="logo-container">
                <img src="https://i.ibb.co/DD98rjsH/logo1.png" alt="Logo Motocicletas" class="logo">
                <div>
                    <div class="logo-text">MOTOTECH</div>
                    <div class="system-name">SIMULADOR DE VENDAS - JUROS COMPOSTOS</div>
                </div>
            </div>
        </header>

        <!-- Dashboard Stats -->
        <div class="dashboard-stats fade-in">
            <div class="stat-card">
                <div class="stat-label">TOTAL DE VENDAS</div>
                <div class="stat-value" id="totalVendas">R$ 0,00</div>
                <small>Valor total aprovado</small>
            </div>
            <div class="stat-card">
                <div class="stat-label">SIMULAÇÕES</div>
                <div class="stat-value" id="totalSimulacoes">0</div>
                <small>Total de orçamentos</small>
            </div>
            <div class="stat-card">
                <div class="stat-label">TAXA DE APROVAÇÃO</div>
                <div class="stat-value" id="taxaAprovacao">0%</div>
                <small>Orçamentos aprovados</small>
            </div>
        </div>

        <!-- Tabs -->
        <div class="tabs">
            <button class="tab active" onclick="openTab('simulacao')">Simulação</button>
            <button class="tab" onclick="openTab('orcamentos')">Orçamentos</button>
        </div>

        <!-- Conteúdo das Tabs -->
        <div id="simulacao-tab" class="tab-content active">
            <!-- Layout Principal com 2 Simulações -->
            <div class="main-layout">
                <!-- 1ª Simulação -->
                <div class="simulation-card simulacao-1 fade-in">
                    <div class="comparison-badge" id="comparisonBadge1" style="display: none;"></div>
                    <div class="simulation-header">
                        <h2 class="simulation-title">
                            <span class="simulation-number">1</span>
                            1° SIMULAÇÃO
                        </h2>
                        <i class="fas fa-percentage" style="color: var(--sim1-color); font-size: 2rem;"></i>
                    </div>
                    
                    <div class="results-grid">
                        <div class="result-item">
                            <div class="result-label">VALOR DAS PARCELAS</div>
                            <div class="result-value" id="parcela1">R$ 0,00</div>
                        </div>
                        <div class="result-item">
                            <div class="result-label">VALOR DA ENTRADA</div>
                            <div class="result-value" id="entrada1">R$ 0,00</div>
                        </div>
                        <div class="result-item">
                            <div class="result-label">VALOR A FINANCIAR</div>
                            <div class="result-value" id="financiar1">R$ 0,00</div>
                        </div>
                        <div class="result-item">
                            <div class="result-label">PORCENTAGEM DA ENTRADA</div>
                            <div class="result-value" id="porcentagem1">0%</div>
                        </div>
                    </div>
                </div>

                <!-- 2ª Simulação -->
                <div class="simulation-card simulacao-2 fade-in">
                    <div class="comparison-badge" id="comparisonBadge2" style="display: none;"></div>
                    <div class="simulation-header">
                        <h2 class="simulation-title">
                            <span class="simulation-number">2</span>
                            2° SIMULAÇÃO
                        </h2>
                        <i class="fas fa-money-bill-wave" style="color: var(--sim2-color); font-size: 2rem;"></i>
                    </div>
                    
                    <div class="results-grid">
                        <div class="result-item">
                            <div class="result-label">NOVO VALOR DAS PARCELAS</div>
                            <div class="result-value" id="parcela2">R$ 0,00</div>
                        </div>
                        <div class="result-item">
                            <div class="result-label">VALOR DA ENTRADA</div>
                            <div class="result-value" id="entrada2">R$ 0,00</div>
                        </div>
                        <div class="result-item">
                            <div class="result-label">VALOR A FINANCIAR</div>
                            <div class="result-value" id="financiar2">R$ 0,00</div>
                        </div>
                        <div class="result-item">
                            <div class="result-label">PORCENTAGEM DA ENTRADA</div>
                            <div class="result-value" id="porcentagem2">0%</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Formulário de Dados -->
            <div class="form-container fade-in">
                <h2 class="form-title"><i class="fas fa-motorcycle"></i> CONFIGURAÇÃO DA SIMULAÇÃO</h2>
                
                <form id="simulationForm">
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-user"></i> Nome do Cliente
                                <span class="info-badge tooltip">i
                                    <span class="tooltip-text">Nome completo do cliente para identificação do orçamento</span>
                                </span>
                            </label>
                            <input type="text" class="form-input" id="cliente" placeholder="Digite o nome completo" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-phone"></i> Telefone
                                <span class="info-badge tooltip">i
                                    <span class="tooltip-text">Telefone com DDD para contato</span>
                                </span>
                            </label>
                            <input type="text" class="form-input" id="telefone" placeholder="(11) 99999-9999" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label"><i class="fas fa-tag"></i> Marca da Moto</label>
                            <select class="form-select" id="marca" onchange="carregarModelos()">
                                <option value="">Selecione a marca</option>
                                <option value="honda">Honda</option>
                                <option value="yamaha">Yamaha</option>
                                <option value="suzuki">Suzuki</option>
                                <option value="kawasaki">Kawasaki</option>
                                <option value="bmw">BMW</option>
                                <option value="ducati">Ducati</option>
                                <option value="harley">Harley-Davidson</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label"><i class="fas fa-motorcycle"></i> Modelo da Moto</label>
                            <select class="form-select" id="modelo" disabled required>
                                <option value="">Primeiro selecione a marca</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-dollar-sign"></i> Preço da Moto (R$)
                                <span class="info-badge tooltip">i
                                    <span class="tooltip-text">Valor total da motocicleta</span>
                                </span>
                            </label>
                            <div class="input-group">
                                <input type="number" class="form-input" id="preco_moto" placeholder="Ex: 21000" min="5000" step="100" value="21000" required>
                                <span class="input-suffix">R$</span>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-calendar-alt"></i> Número de Parcelas
                                <span class="info-badge tooltip">i
                                    <span class="tooltip-text">Quantidade de meses para pagamento</span>
                                </span>
                            </label>
                            <select class="form-select" id="parcelas">
                                <option value="12">12x</option>
                                <option value="24">24x</option>
                                <option value="36" selected>36x</option>
                                <option value="48">48x</option>
                                <option value="60">60x</option>
                            </select>
                        </div>
                        
                        <!-- Campo de Juros Adicionado -->
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-percentage"></i> Taxa de Juros (% a.m.)
                                <span class="info-badge tooltip">i
                                    <span class="tooltip-text">Taxa de juros mensal aplicada ao financiamento</span>
                                </span>
                            </label>
                            <div class="input-group">
                                <input type="number" class="form-input" id="juros" value="2.5" min="0" max="20" step="0.1" required>
                                <span class="input-suffix">%</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Controles de Entrada -->
                    <div class="simulation-inputs">
                        <!-- 1ª Simulação: Entrada por Porcentagem -->
                        <div class="input-card simulacao-1">
                            <h3><i class="fas fa-sliders-h"></i> 1° SIMULAÇÃO - ENTRADA EM %</h3>
                            <div class="form-group">
                                <label class="form-label">
                                    Porcentagem da Entrada
                                    <span class="info-badge tooltip">i
                                        <span class="tooltip-text">Percentual do valor da moto que será dado como entrada</span>
                                    </span>
                                </label>
                                <div class="slider-container">
                                    <input type="range" id="porcentagem_entrada" min="10" max="80" step="5" value="60" class="form-input" oninput="atualizarPorcentagem(this.value)">
                                    <div class="slider-value" id="porcentagem_valor">60%</div>
                                </div>
                                <div class="percentage-slider">
                                    <small>Arraste para definir a porcentagem da entrada (10% a 80%)</small>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 2ª Simulação: Entrada por Valor -->
                        <div class="input-card simulacao-2">
                            <h3><i class="fas fa-money-bill"></i> 2° SIMULAÇÃO - VALOR DA ENTRADA</h3>
                            <div class="form-group">
                                <label class="form-label">
                                    Valor da Entrada (Opcional)
                                    <span class="info-badge tooltip">i
                                        <span class="tooltip-text">Valor fixo em reais para entrada. Deixe em branco para usar 25%</span>
                                    </span>
                                </label>
                                <div class="input-group">
                                    <input type="number" class="form-input" id="valor_entrada" placeholder="Ex: 5000" min="0" step="100" value="5000" onchange="validarEntradaCustomizada()">
                                    <span class="input-suffix">R$</span>
                                </div>
                                <div class="percentage-slider">
                                    <small>Deixe em branco para usar a porcentagem padrão (25%)</small>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="buttons-container">
                        <button type="button" class="btn btn-danger" onclick="limparTodasSimulacoes()">
                            <i class="fas fa-trash-alt"></i> Limpar Todas
                        </button>
                        <button type="button" class="btn btn-secondary" onclick="limparFormulario()">
                            <i class="fas fa-trash"></i> Limpar Formulário
                        </button>
                        <button type="button" class="btn btn-primary pulse" onclick="calcularSimulacoes()" id="btnCalcular">
                            <i class="fas fa-calculator"></i> Calcular Simulações
                        </button>
                        <button type="button" class="btn btn-primary" onclick="salvarOrcamento()" id="btnSalvar">
                            <i class="fas fa-save"></i> Salvar Orçamento
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Tab de Orçamentos -->
        <div id="orcamentos-tab" class="tab-content">
    <div class="orcamentos-container fade-in">
        <h2 class="form-title"><i class="fas fa-file-invoice-dollar"></i> ORÇAMENTOS SALVOS</h2>
        
        <!-- Filtros -->
        <div class="filters" style="display: flex; gap: 10px; margin-bottom: 20px;">
            <select class="form-select" style="flex: 1;" id="filterStatus" onchange="filtrarOrcamentos()">
                <option value="">Todos os status</option>
                <option value="aprovado">Aprovados</option>
                <option value="pendente">Pendentes</option>
                <option value="rejeitado">Rejeitados</option>
            </select>
            <input type="text" class="form-input" placeholder="Buscar cliente..." id="searchCliente" onkeyup="filtrarOrcamentos()" style="flex: 2;">
        </div>
        
        <div class="orcamentos-list" id="orcamentosList">
            <!-- Orçamentos serão carregados aqui -->
        </div>
        
        <div class="buttons-container">
            <button type="button" class="btn btn-secondary" onclick="exportarOrcamentos()">
                <i class="fas fa-file-export"></i> Exportar CSV
            </button>
            <!-- BOTÃO "LIMPAR TODOS" REMOVIDO -->
        </div>
    </div>
</div>

        <!-- Rodapé -->
        <footer class="fade-in">
            <p>Sistema de Simulação de Vendas - MOTOTECH &copy; 2023</p>
            <p>Entrada personalizada: Porcentagem na 1ª simulação, Valor na 2ª simulação</p>
            <div class="footer-links">
                <a href="#"><i class="fas fa-database"></i> BaseRow</a>
                <a href="#"><i class="fas fa-file-excel"></i> Planilha</a>
                <a href="#"><i class="fas fa-chart-bar"></i> Relatórios</a>
                <a href="#"><i class="fas fa-headset"></i> Suporte</a>
            </div>
        </footer>
    </div>

    <!-- Botões Flutuantes -->
    <div class="floating-buttons">
        <button class="floating-btn calculator" onclick="openCalculator()">
            <i class="fas fa-calculator"></i>
            <span class="btn-label">Calculadora Futurista</span>
        </button>
        <button class="floating-btn config" onclick="openConfigModal()">
            <i class="fas fa-cogs"></i>
            <span class="btn-label">Configurações</span>
        </button>
        <button class="floating-btn management" onclick="openManagementModal()">
            <i class="fas fa-tasks"></i>
            <span class="btn-label">Gestão</span>
        </button>
    </div>

    <!-- Calculadora Futurista (sem código de acesso) -->
    <div id="calculatorModal" class="calculator-modal">
        <div class="calculator-container">
            <div class="calculator-header">
                <h2 class="calculator-title">CALCULADORA FUTURISTA</h2>
                <button class="close-calculator" onclick="closeCalculator()">×</button>
            </div>
            
            <div class="calculator-display">
                <div class="calculator-expression" id="calcExpression"></div>
                <div class="calculator-result" id="calcDisplay">0</div>
            </div>
            
            <div class="calculator-buttons">
                <button class="calc-btn clear" onclick="clearDisplay()">C</button>
                <button class="calc-btn clear" onclick="deleteLast()">⌫</button>
                <button class="calc-btn operator" onclick="appendToDisplay('/')">/</button>
                <button class="calc-btn operator" onclick="appendToDisplay('*')">×</button>
                
                <button class="calc-btn" onclick="appendToDisplay('7')">7</button>
                <button class="calc-btn" onclick="appendToDisplay('8')">8</button>
                <button class="calc-btn" onclick="appendToDisplay('9')">9</button>
                <button class="calc-btn operator" onclick="appendToDisplay('-')">-</button>
                
                <button class="calc-btn" onclick="appendToDisplay('4')">4</button>
                <button class="calc-btn" onclick="appendToDisplay('5')">5</button>
                <button class="calc-btn" onclick="appendToDisplay('6')">6</button>
                <button class="calc-btn operator" onclick="appendToDisplay('+')">+</button>
                
                <button class="calc-btn" onclick="appendToDisplay('1')">1</button>
                <button class="calc-btn" onclick="appendToDisplay('2')">2</button>
                <button class="calc-btn" onclick="appendToDisplay('3')">3</button>
                <button class="calc-btn equals" onclick="calculate()">=</button>
                
                <button class="calc-btn" onclick="appendToDisplay('0')">0</button>
                <button class="calc-btn" onclick="appendToDisplay('00')">00</button>
                <button class="calc-btn" onclick="appendToDisplay('.')">.</button>
                <button class="calc-btn" onclick="appendToDisplay('%')">%</button>
            </div>
        </div>
    </div>

    <!-- Modal de Código para Configurações -->
    <div id="configModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Acesso às Configurações</h3>
                <button class="close-modal" onclick="closeConfigModal()">×</button>
            </div>
            <div class="code-input-container">
                <label class="code-input-label">Código de Acesso:</label>
                <input type="password" class="code-input" id="configCode" placeholder="Digite o código de acesso" maxlength="6" onkeypress="handleCodeKeypress(event, 'config')">
            </div>
            <button class="modal-btn" onclick="validateConfigCode()">Acessar Configurações</button>
            <div class="modal-message" id="configMessage"></div>
        </div>
    </div>

    <!-- Modal de Código para Gestão -->
    <div id="managementModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Acesso à Gestão</h3>
                <button class="close-modal" onclick="closeManagementModal()">×</button>
            </div>
            <div class="code-input-container">
                <label class="code-input-label">Código de Acesso:</label>
                <input type="password" class="code-input" id="managementCode" placeholder="Digite o código de acesso" maxlength="6" onkeypress="handleCodeKeypress(event, 'management')">
            </div>
            <button class="modal-btn" onclick="validateManagementCode()">Acessar Gestão</button>
            <div class="modal-message" id="managementMessage"></div>
        </div>
    </div>

    <!-- Pop-up de Configurações (abre após autenticação) -->
    <div id="configPopup" class="popup-container">
        <div class="popup-content">
            <div class="popup-header">
                <h3 class="popup-title"><i class="fas fa-cog"></i> CONFIGURAÇÃO DE CÁLCULOS</h3>
                <button class="close-popup" onclick="closeConfigPopup()">×</button>
            </div>
            
            <div class="config-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-top: 20px;">
                <!-- Configurações Gerais -->
                <div class="form-group">
                    <h3 style="font-family: 'Orbitron'; color: var(--sim1-color); margin-bottom: 20px;">
                        <i class="fas fa-sliders-h"></i> PARÂMETROS GERAIS
                    </h3>
                    
                    <div class="form-group">
                        <label class="form-label">Taxa de Juros Mensal (%)</label>
                        <div class="input-group">
                            <input type="number" class="form-input" id="popupJuros" value="2.5" min="0" max="20" step="0.1" onchange="updateJurosFromPopup()">
                            <span class="input-suffix">%</span>
                        </div>
                        <small style="color: var(--text-light); display: block; margin-top: 5px;">Taxa de juros mensal aplicada</small>
                    </div>
                    
                    <div style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 8px; margin-top: 20px; border-left: 3px solid var(--accent);">
                        <div style="color: var(--accent); font-weight: 500; margin-bottom: 8px; font-family: 'Orbitron';">
                            <i class="fas fa-calculator"></i> FÓRMULAS DE CÁLCULO
                        </div>
                        <div style="font-size: 0.9rem; line-height: 1.6; color: var(--text-light);">
                            <div>1. Montante = Financiado × (1 + Juros)<sup>Parcelas</sup></div>
                            <div>2. Juros totais = Montante - Financiado</div>
                            <div>3. Parcela = Montante ÷ Parcelas</div>
                        </div>
                    </div>
                </div>
                
                <!-- Fórmulas Explicadas -->
                <div class="form-group">
                    <h3 style="font-family: 'Orbitron'; color: var(--sim1-color); margin-bottom: 20px;">
                        <i class="fas fa-book"></i> EXEMPLO PRÁTICO
                    </h3>
                    
                    <div style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                        <div style="color: var(--accent); font-weight: 500; margin-bottom: 8px; font-family: 'Orbitron';">
                            <i class="fas fa-percentage"></i> DADOS DO EXEMPLO
                        </div>
                        <div style="font-size: 0.9rem; line-height: 1.6; color: var(--text-light);">
                            <div>• Preço da moto: R$ 21.000,00</div>
                            <div>• Entrada: 60% (R$ 12.600,00)</div>
                            <div>• Financiado: R$ 8.400,00</div>
                            <div>• Juros: 2,5% ao mês</div>
                            <div>• Parcelas: 36 meses</div>
                        </div>
                    </div>
                    
                    <div style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 8px;">
                        <div style="color: var(--accent); font-weight: 500; margin-bottom: 8px; font-family: 'Orbitron';">
                            <i class="fas fa-calculator"></i> CÁLCULO DO EXEMPLO
                        </div>
                        <div style="font-size: 0.9rem; line-height: 1.6; color: var(--text-light);">
                            <div>1. Montante = 8.400 × (1 + 0,025)<sup>36</sup> = R$ 20.532,15</div>
                            <div>2. Juros totais = 20.532,15 - 8.400 = R$ 12.132,15</div>
                            <div>3. Parcela = 20.532,15 ÷ 36 = R$ 570,34</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 30px;">
                <button class="btn btn-primary" onclick="closeConfigPopup()">
                    <i class="fas fa-check"></i> Salvar e Fechar
                </button>
            </div>
        </div>
    </div>

    <!-- Pop-up de Gestão (abre após autenticação) -->
    <div id="managementPopup" class="popup-container">
        <div class="popup-content">
            <div class="popup-header">
                <h3 class="popup-title"><i class="fas fa-chart-pie"></i> GESTÃO DO SIMULADOR</h3>
                <button class="close-popup" onclick="closeManagementPopup()">×</button>
            </div>
            
            <div class="management-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-top: 20px;">
                <!-- 1ª Simulação -->
                <div class="management-section" style="background: rgba(0, 212, 170, 0.05); border-left: 4px solid var(--sim1-color); padding: 20px; border-radius: 15px;">
                    <h3 style="font-family: 'Orbitron'; color: var(--accent); margin-bottom: 20px; text-align: center;">1° SIMULAÇÃO</h3>
                    <div class="management-results">
                        <div class="management-item">
                            <span class="management-label">VALOR FINANCIADO</span>
                            <span class="management-value" id="popupFinanciado1">R$ 0,00</span>
                        </div>
                        <div class="management-item">
                            <span class="management-label">JUROS TOTAIS</span>
                            <span class="management-value" id="popupJurosTotais1">R$ 0,00</span>
                        </div>
                        <div class="management-item">
                            <span class="management-label">VALOR TOTAL</span>
                            <span class="management-value" id="popupValorTotal1">R$ 0,00</span>
                        </div>
                        <div class="management-item">
                            <span class="management-label">CUSTO DO CRÉDITO</span>
                            <span class="management-value" id="popupCustoCredito1">0%</span>
                        </div>
                    </div>
                </div>
                
                <!-- 2ª Simulação -->
                <div class="management-section" style="background: rgba(67, 97, 238, 0.05); border-left: 4px solid var(--sim2-color); padding: 20px; border-radius: 15px;">
                    <h3 style="font-family: 'Orbitron'; color: var(--accent); margin-bottom: 20px; text-align: center;">2° SIMULAÇÃO</h3>
                    <div class="management-results">
                        <div class="management-item">
                            <span class="management-label">VALOR FINANCIADO</span>
                            <span class="management-value" id="popupFinanciado2">R$ 0,00</span>
                        </div>
                        <div class="management-item">
                            <span class="management-label">JUROS TOTAIS</span>
                            <span class="management-value" id="popupJurosTotais2">R$ 0,00</span>
                        </div>
                        <div class="management-item">
                            <span class="management-label">VALOR TOTAL</span>
                            <span class="management-value" id="popupValorTotal2">R$ 0,00</span>
                        </div>
                        <div class="management-item">
                            <span class="management-label">CUSTO DO CRÉDITO</span>
                            <span class="management-value" id="popupCustoCredito2">0%</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div style="margin-top: 30px; padding: 20px; background: rgba(0,0,0,0.3); border-radius: 15px;">
                <h3 style="font-family: 'Orbitron'; color: var(--accent); margin-bottom: 15px; text-align: center;">
                    <i class="fas fa-chart-line"></i> RESUMO COMPARATIVO
                </h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                    <div style="text-align: center;">
                        <div style="color: var(--text-light); font-size: 0.9rem;">Diferença de Parcela</div>
                        <div style="color: var(--accent); font-size: 1.5rem; font-family: 'Orbitron';" id="popupDiferencaParcela">R$ 0,00</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="color: var(--text-light); font-size: 0.9rem;">Economia Total</div>
                        <div style="color: var(--success); font-size: 1.5rem; font-family: 'Orbitron';" id="popupEconomiaTotal">R$ 0,00</div>
                    </div>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 30px;">
                <button class="btn btn-primary" onclick="closeManagementPopup()">
                    <i class="fas fa-times"></i> Fechar
                </button>
            </div>
        </div>
    </div>

    <!-- Modal de Alteração de Status -->
    <div id="statusModal" class="status-modal">
        <div class="status-modal-content">
            <div class="status-modal-header">
                <h3 class="status-modal-title"><i class="fas fa-exchange-alt"></i> ALTERAR STATUS</h3>
                <button class="close-status-modal" onclick="closeStatusModal()">×</button>
            </div>
            
            <div class="orcamento-info">
                <h4>Orçamento #<span id="modalOrcamentoId"></span></h4>
                <p>Cliente: <span id="modalOrcamentoCliente"></span></p>
                <p>Modelo: <span id="modalOrcamentoModelo"></span></p>
                <p>Valor: <span id="modalOrcamentoValor"></span></p>
                <p>Entrada: <span id="modalOrcamentoEntrada"></span></p>
                <p>Parcelas: <span id="modalOrcamentoParcelas"></span></p>
                <p>Status atual: <span id="modalOrcamentoStatusAtual" class="status-pendente">PENDENTE</span></p>
            </div>
            
            <div style="text-align: center; margin: 20px 0;">
                <p style="color: var(--text-light); font-size: 1.1rem;">Selecione o novo status para este orçamento:</p>
            </div>
            
            <div class="status-options">
                <div class="status-option aprovar" onclick="alterarOrcamentoStatus('aprovado')">
                    <i class="fas fa-check-circle"></i>
                    <div>APROVAR</div>
                    <small>Marcar como aprovado</small>
                </div>
                
                <div class="status-option rejeitar" onclick="alterarOrcamentoStatus('rejeitado')">
                    <i class="fas fa-times-circle"></i>
                    <div>REJEITAR</div>
                    <small>Marcar como rejeitado</small>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notifications Container -->
    <div class="toast-container" id="toastContainer"></div>

    <script>
        // =========================================================================
        // CONFIGURAÇÃO E CÁLCULOS - REVISADOS E CORRIGIDOS
        // =========================================================================
        
        // Código de acesso (tabela acessos id 800237)
        const ACCESS_CODE = "800237";
        
        // Dados de marcas e modelos
        const modelosPorMarca = {
            honda: ["CG 160 Start", "CG 160 Fan", "CB 300F Twister", "CB 500F", "CB 650R", "XRE 300", "NX 400", "Africa Twin"],
            yamaha: ["Fazer 250", "MT-03", "MT-07", "MT-09", "R3", "R1", "XTZ 250", "Tenere 700"],
            suzuki: ["GSX-S750", "GSX-R1000", "GSX-R750", "DR650", "V-Strom 650", "Burgman 400"],
            kawasaki: ["Ninja 300", "Ninja 400", "Ninja 650", "Z400", "Z650", "Z900", "Versys 650"],
            bmw: ["GS 310", "F 750 GS", "F 850 GS", "R 1250 GS", "S 1000 RR", "R 18"],
            ducati: ["Monster", "Panigale V2", "Panigale V4", "Multistrada", "Scrambler", "Diavel"],
            harley: ["Sportster", "Softail", "Touring", "Street", "LiveWire"]
        };

        // Variáveis globais
        let porcentagemEntrada = 60;
        let valorEntradaCustomizado = 5000;
        let jurosPercentual = 2.5; // Valor padrão
        let orcamentos = [];
        let orcamentosFiltrados = [];
        let orcamentoSelecionadoId = null;

        // Variáveis da calculadora
        let calcCurrentDisplay = '0';
        let calcExpression = '';
        let calcResetDisplay = false;

        // Debounce para cálculos
        let debounceTimer;

        // Cache inteligente
        const cache = {
            set: (key, data, ttl = 3600000) => {
                const item = {
                    data: data,
                    expiry: Date.now() + ttl
                };
                localStorage.setItem(key, JSON.stringify(item));
            },
            get: (key) => {
                const item = localStorage.getItem(key);
                if (!item) return null;
                
                const parsed = JSON.parse(item);
                if (Date.now() > parsed.expiry) {
                    localStorage.removeItem(key);
                    return null;
                }
                return parsed.data;
            }
        };

        // Atualizar data e hora
        function updateDateTime() {
            const now = new Date();
            
            // Formatar data
            const options = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            };
            const formattedDate = now.toLocaleDateString('pt-BR', options);
            
            // Formatar hora
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const seconds = String(now.getSeconds()).padStart(2, '0');
            const formattedTime = `${hours}:${minutes}:${seconds}`;
            
            document.getElementById('currentDate').textContent = formattedDate;
            document.getElementById('currentTime').textContent = formattedTime;
        }

        // Inicializar data e hora
        updateDateTime();
        setInterval(updateDateTime, 1000);

        // Função para mostrar toast notifications
        function mostrarToast(mensagem, tipo = 'success') {
            const toastContainer = document.getElementById('toastContainer');
            const toast = document.createElement('div');
            toast.className = `toast ${tipo}`;
            
            const icon = tipo === 'success' ? 'check-circle' : 
                        tipo === 'error' ? 'exclamation-circle' : 
                        tipo === 'warning' ? 'exclamation-triangle' : 'info-circle';
            
            toast.innerHTML = `
                <i class="fas fa-${icon}"></i>
                <span>${mensagem}</span>
            `;
            
            toastContainer.appendChild(toast);
            
            // Remove o toast após 3 segundos
            setTimeout(() => {
                if (toast.parentNode) {
                    toast.remove();
                }
            }, 3000);
        }

        // Função para mostrar loading
        function showLoading() {
            document.getElementById('loadingOverlay').style.display = 'flex';
        }

        // Função para esconder loading
        function hideLoading() {
            document.getElementById('loadingOverlay').style.display = 'none';
        }

        // Sanitização de entradas
        function sanitizeInput(input) {
            const div = document.createElement('div');
            div.textContent = input;
            return div.innerHTML;
        }

        // Função para carregar modelos
        function carregarModelos() {
            const marcaSelect = document.getElementById('marca');
            const modeloSelect = document.getElementById('modelo');
            const marcaSelecionada = marcaSelect.value;
            
            modeloSelect.innerHTML = '<option value="">Selecione o modelo</option>';
            modeloSelect.disabled = true;
            
            if (marcaSelecionada && modelosPorMarca[marcaSelecionada]) {
                modeloSelect.disabled = false;
                
                modelosPorMarca[marcaSelecionada].forEach(modelo => {
                    const option = document.createElement('option');
                    option.value = modelo.toLowerCase().replace(/\s+/g, '_');
                    option.textContent = modelo;
                    modeloSelect.appendChild(option);
                });
            }
        }

        // Função para atualizar a porcentagem da entrada
        function atualizarPorcentagem(valor) {
            porcentagemEntrada = parseInt(valor);
            document.getElementById('porcentagem_valor').textContent = `${valor}%`;
            debounceCalculate();
        }

        // Função para validar entrada customizada
        function validarEntradaCustomizada() {
            const input = document.getElementById('valor_entrada');
            const precoMoto = parseFloat(document.getElementById('preco_moto').value) || 21000;
            const valor = parseFloat(input.value) || 0;
            
            if (valor > precoMoto * 0.95) {
                input.classList.add('input-error');
                mostrarToast('A entrada não pode ser maior que 95% do valor da moto!', 'warning');
                input.value = Math.floor(precoMoto * 0.95 / 100) * 100;
            } else if (valor < 0) {
                input.classList.add('input-error');
                mostrarToast('A entrada não pode ser negativa!', 'warning');
                input.value = 0;
            } else {
                input.classList.remove('input-error');
            }
            
            if (valor > 0) {
                valorEntradaCustomizado = valor;
            } else {
                valorEntradaCustomizado = null;
            }
            
            debounceCalculate();
        }

        // Função para atualizar juros
        function atualizarJuros() {
            jurosPercentual = parseFloat(document.getElementById('juros').value) || 2.5;
        }

        // Função para atualizar juros do popup
        function updateJurosFromPopup() {
            jurosPercentual = parseFloat(document.getElementById('popupJuros').value) || 2.5;
            document.getElementById('juros').value = jurosPercentual;
            debounceCalculate();
        }

        // Debounce para cálculos
        function debounceCalculate() {
            clearTimeout(debounceTimer);
            debounceTimer = setTimeout(calcularSimulacoes, 300);
        }

        // Função para calcular juros compostos
        function calcularJurosCompostos(valorPrincipal, taxaMensal, periodoMeses) {
            // taxaMensal deve vir em decimal (ex: 2.5% = 0.025)
            const montante = valorPrincipal * Math.pow(1 + taxaMensal, periodoMeses);
            const jurosTotais = montante - valorPrincipal;
            
            return {
                montante: montante,
                jurosTotais: jurosTotais,
                parcela: montante / periodoMeses
            };
        }

        // Função para comparar simulações
        function compararSimulacoes(sim1, sim2) {
            return {
                diferencaParcela: Math.abs(sim1.parcela - sim2.parcela),
                economiaTotal: Math.abs(sim1.montante - sim2.montante),
                vantajosa: sim1.parcela < sim2.parcela ? 'sim1' : 'sim2',
                porcentagemEconomia: ((sim1.montante - sim2.montante) / sim1.montante * 100).toFixed(2)
            };
        }

        // Função principal de cálculo - CORRIGIDA COM JUROS COMPOSTOS
        function calcularSimulacoes() {
            try {
                showLoading();
                
                // Atualiza juros
                atualizarJuros();
                
                const precoMoto = parseFloat(document.getElementById('preco_moto').value) || 21000;
                const parcelas = parseInt(document.getElementById('parcelas').value) || 36;
                const jurosMensal = jurosPercentual / 100; // Converte porcentagem para decimal
                
                // Validações
                if (precoMoto <= 0) {
                    mostrarToast('Informe um preço válido para a moto!', 'warning');
                    hideLoading();
                    return;
                }
                
                if (parcelas <= 0) {
                    mostrarToast('Informe um número válido de parcelas!', 'warning');
                    hideLoading();
                    return;
                }
                
                // ===================================================
                // 1ª SIMULAÇÃO: Baseada na porcentagem da entrada
                // ===================================================
                
                // Calcula entrada baseada na porcentagem
                const entrada1 = precoMoto * (porcentagemEntrada / 100);
                
                // Valor a financiar
                const financiar1 = precoMoto - entrada1;
                
                // Calcula usando juros compostos
                const resultado1 = calcularJurosCompostos(financiar1, jurosMensal, parcelas);
                
                const parcela1 = resultado1.parcela;
                const jurosTotais1 = resultado1.jurosTotais;
                const montante1 = resultado1.montante;
                const custoCredito1 = (jurosTotais1 / financiar1) * 100;
                
                // ===================================================
                // 2ª SIMULAÇÃO: Baseada no valor da entrada personalizado
                // ===================================================
                
                let entrada2, porcentagemEntrada2;
                
                if (valorEntradaCustomizado !== null && valorEntradaCustomizado > 0) {
                    entrada2 = Math.min(valorEntradaCustomizado, precoMoto * 0.95);
                    porcentagemEntrada2 = (entrada2 / precoMoto) * 100;
                } else {
                    entrada2 = precoMoto * 0.25;
                    porcentagemEntrada2 = 25;
                }
                
                const financiar2 = precoMoto - entrada2;
                const resultado2 = calcularJurosCompostos(financiar2, jurosMensal, parcelas);
                
                const parcela2 = resultado2.parcela;
                const jurosTotais2 = resultado2.jurosTotais;
                const montante2 = resultado2.montante;
                const custoCredito2 = (jurosTotais2 / financiar2) * 100;
                
                // ===================================================
                // COMPARAÇÃO DAS SIMULAÇÕES
                // ===================================================
                
                const comparacao = compararSimulacoes(resultado1, resultado2);
                
                // ===================================================
                // ATUALIZAÇÃO DA INTERFACE - 1ª SIMULAÇÃO
                // ===================================================
                
                atualizarResultado('entrada1', entrada1);
                atualizarResultado('financiar1', financiar1);
                atualizarResultado('parcela1', parcela1);
                document.getElementById('porcentagem1').textContent = `${porcentagemEntrada}%`;
                
                // ===================================================
                // ATUALIZAÇÃO DA INTERFACE - 2ª SIMULAÇÃO
                // ===================================================
                
                atualizarResultado('entrada2', entrada2);
                atualizarResultado('financiar2', financiar2);
                atualizarResultado('parcela2', parcela2);
                document.getElementById('porcentagem2').textContent = `${porcentagemEntrada2.toFixed(1)}%`;
                
                // ===================================================
                // ATUALIZAÇÃO DO POPUP DE GESTÃO
                // ===================================================
                
                // 1ª Simulação
                atualizarResultado('popupFinanciado1', financiar1);
                atualizarResultado('popupJurosTotais1', jurosTotais1);
                atualizarResultado('popupValorTotal1', montante1);
                document.getElementById('popupCustoCredito1').textContent = `${custoCredito1.toFixed(2)}%`;
                
                // 2ª Simulação
                atualizarResultado('popupFinanciado2', financiar2);
                atualizarResultado('popupJurosTotais2', jurosTotais2);
                atualizarResultado('popupValorTotal2', montante2);
                document.getElementById('popupCustoCredito2').textContent = `${custoCredito2.toFixed(2)}%`;
                
                // Comparativo
                atualizarResultado('popupDiferencaParcela', comparacao.diferencaParcela);
                atualizarResultado('popupEconomiaTotal', comparacao.economiaTotal);
                
                // ===================================================
                // ATUALIZAR BADGES DE COMPARAÇÃO
                // ===================================================
                
                const badge1 = document.getElementById('comparisonBadge1');
                const badge2 = document.getElementById('comparisonBadge2');
                
                if (comparacao.vantajosa === 'sim1') {
                    badge1.innerHTML = '<i class="fas fa-crown"></i> MELHOR';
                    badge1.className = 'comparison-badge best';
                    badge1.style.display = 'block';
                    
                    badge2.innerHTML = '<i class="fas fa-chart-line"></i> COMPARAR';
                    badge2.className = 'comparison-badge worst';
                    badge2.style.display = 'block';
                } else {
                    badge1.innerHTML = '<i class="fas fa-chart-line"></i> COMPARAR';
                    badge1.className = 'comparison-badge worst';
                    badge1.style.display = 'block';
                    
                    badge2.innerHTML = '<i class="fas fa-crown"></i> MELHOR';
                    badge2.className = 'comparison-badge best';
                    badge2.style.display = 'block';
                }
                
                // ===================================================
                // FEEDBACK VISUAL
                // ===================================================
                
                // Animação de sucesso no botão
                const btn = document.getElementById('btnCalcular');
                btn.innerHTML = '<i class="fas fa-check"></i> Simulações Calculadas!';
                btn.style.background = 'linear-gradient(135deg, rgba(0, 255, 136, 0.3), rgba(0, 255, 136, 0.1))';
                
                setTimeout(() => {
                    btn.innerHTML = '<i class="fas fa-calculator"></i> Calcular Simulações';
                    btn.style.background = '';
                    hideLoading();
                }, 1000);
                
                // Mostra toast de sucesso
                const vantajosa = comparacao.vantajosa === 'sim1' ? "1ª Simulação" : "2ª Simulação";
                mostrarToast(`Simulações calculadas com sucesso! Mais vantajosa: ${vantajosa} (Economia: ${comparacao.porcentagemEconomia}%) 🏍️`, 'success');
                
                // Salvar em cache
                cache.set('ultima_simulacao', {
                    precoMoto: precoMoto,
                    parcelas: parcelas,
                    juros: jurosPercentual,
                    porcentagemEntrada: porcentagemEntrada,
                    valorEntradaCustomizado: valorEntradaCustomizado,
                    resultados: {
                        sim1: { parcela: parcela1, entrada: entrada1, financiado: financiar1 },
                        sim2: { parcela: parcela2, entrada: entrada2, financiado: financiar2 }
                    },
                    timestamp: Date.now()
                });
                
                // Log para debug
                console.log('Cálculos realizados com sucesso (Juros Compostos):');
                console.log(`1ª Simulação: Entrada ${porcentagemEntrada}% = R$ ${entrada1.toFixed(2)}, Parcela: R$ ${parcela1.toFixed(2)}`);
                console.log(`2ª Simulação: Entrada ${porcentagemEntrada2.toFixed(1)}% = R$ ${entrada2.toFixed(2)}, Parcela: R$ ${parcela2.toFixed(2)}`);
                console.log(`Juros aplicados: ${jurosPercentual}% ao mês, ${parcelas} parcelas`);
                console.log(`Comparação: ${vantajosa} é mais vantajosa com economia de ${comparacao.porcentagemEconomia}%`);
                
            } catch (error) {
                console.error('Erro ao calcular simulações:', error);
                mostrarToast('Erro ao calcular simulações! Verifique os valores informados.', 'error');
                hideLoading();
            }
        }

        // Função auxiliar para atualizar resultados formatados
        function atualizarResultado(elementId, valor) {
            const element = document.getElementById(elementId);
            if (element) {
                if (elementId.includes('porcentagem') || elementId.includes('CustoCredito')) {
                    element.textContent = `${valor.toFixed(2)}%`;
                } else {
                    element.textContent = formatarMoeda(valor);
                }
            }
        }

        // Função para formatar moeda
        function formatarMoeda(valor) {
            return 'R$ ' + valor.toLocaleString('pt-BR', {
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            });
        }

        // Função para formatar preço
        function formatarPreco(input) {
            let valor = input.value.replace(/\D/g, '');
            valor = (parseInt(valor) / 100).toFixed(2);
            input.value = 'R$ ' + valor.replace('.', ',');
        }

        // Validação de telefone aprimorada
        function validarTelefone(telefone) {
            const regex = /^\(?\d{2}\)?[\s-]?9?\d{4}[\s-]?\d{4}$/;
            return regex.test(telefone.replace(/\D/g, ''));
        }

        // Função para salvar orçamento
        async function salvarOrcamento() {
            try {
                const cliente = document.getElementById('cliente').value.trim();
                const telefone = document.getElementById('telefone').value.trim();
                const precoMoto = document.getElementById('preco_moto').value;
                
                // Validações
                if (!cliente) {
                    mostrarToast('Informe o nome do cliente!', 'warning');
                    document.getElementById('cliente').classList.add('input-error');
                    return;
                } else {
                    document.getElementById('cliente').classList.remove('input-error');
                }
                
                if (!validarTelefone(telefone)) {
                    mostrarToast('Informe um telefone válido!', 'warning');
                    document.getElementById('telefone').classList.add('input-error');
                    return;
                } else {
                    document.getElementById('telefone').classList.remove('input-error');
                }
                
                // Verifica se há valores calculados
                const parcela1 = document.getElementById('parcela1').textContent;
                if (parcela1 === 'R$ 0,00') {
                    mostrarToast('Calcule as simulações antes de salvar!', 'warning');
                    return;
                }
                
                // Coleta dados do orçamento
                const orcamento = {
                    data_criacao: new Date().toISOString(),
                    cliente: sanitizeInput(cliente),
                    telefone: telefone,
                    marca: document.getElementById('marca').value,
                    modelo: document.getElementById('modelo').value,
                    preco_moto: parseFloat(precoMoto),
                    parcelas: parseInt(document.getElementById('parcelas').value),
                    juros_percentual: jurosPercentual,
                    
                    // 1ª Simulação
                    entrada_porcentagem: porcentagemEntrada,
                    entrada_simulacao1: parseFloat(document.getElementById('entrada1').textContent.replace('R$ ', '').replace(/\./g, '').replace(',', '.')),
                    parcela_simulacao1: parseFloat(document.getElementById('parcela1').textContent.replace('R$ ', '').replace(/\./g, '').replace(',', '.')),
                    financiado_simulacao1: parseFloat(document.getElementById('financiar1').textContent.replace('R$ ', '').replace(/\./g, '').replace(',', '.')),
                    
                    // 2ª Simulação
                    entrada_simulacao2: parseFloat(document.getElementById('entrada2').textContent.replace('R$ ', '').replace(/\./g, '').replace(',', '.')),
                    parcela_simulacao2: parseFloat(document.getElementById('parcela2').textContent.replace('R$ ', '').replace(/\./g, '').replace(',', '.')),
                    financiado_simulacao2: parseFloat(document.getElementById('financiar2').textContent.replace('R$ ', '').replace(/\./g, '').replace(',', '.')),
                    
                    status: 'pendente',
                    vendedor: 'Sistema',
                    data_atualizacao: new Date().toISOString()
                };
                
                // Simulação local
                orcamento.id = Date.now();
                orcamentos.unshift(orcamento);
                localStorage.setItem('orcamentos_mototech', JSON.stringify(orcamentos));
                
                // Criar backup automático
                criarBackupAutomatico();
                
                // Animação de sucesso no botão
                const btn = document.getElementById('btnSalvar');
                btn.innerHTML = '<i class="fas fa-check"></i> Salvo com Sucesso!';
                btn.style.background = 'linear-gradient(135deg, rgba(0, 255, 136, 0.3), rgba(0, 255, 136, 0.1))';
                
                setTimeout(() => {
                    btn.innerHTML = '<i class="fas fa-save"></i> Salvar Orçamento';
                    btn.style.background = '';
                }, 2000);
                
                // Mostra toast de sucesso
                mostrarToast('Orçamento salvo com sucesso! ✅', 'success');
                
                atualizarDashboard();
                carregarOrcamentos();
                limparFormulario();
                
            } catch (error) {
                console.error('Erro:', error);
                mostrarToast('Erro ao salvar orçamento!', 'error');
            }
        }

        // Criar backup automático
        function criarBackupAutomatico() {
            try {
                const dados = localStorage.getItem('orcamentos_mototech');
                if (dados) {
                    const blob = new Blob([dados], { type: 'application/json' });
                    const url = URL.createObjectURL(blob);
                    // Em produção, aqui enviaríamos para um servidor
                    console.log('Backup criado automaticamente');
                    
                    // Limpar URL depois de um tempo
                    setTimeout(() => URL.revokeObjectURL(url), 10000);
                }
            } catch (error) {
                console.error('Erro ao criar backup:', error);
            }
        }

        // Função para limpar formulário
        function limparFormulario() {
            document.getElementById('cliente').value = '';
            document.getElementById('telefone').value = '';
            document.getElementById('marca').value = '';
            document.getElementById('modelo').innerHTML = '<option value="">Primeiro selecione a marca</option>';
            document.getElementById('modelo').disabled = true;
            document.getElementById('preco_moto').value = 21000;
            document.getElementById('valor_entrada').value = 5000;
            document.getElementById('juros').value = 2.5;
            
            porcentagemEntrada = 60;
            valorEntradaCustomizado = 5000;
            jurosPercentual = 2.5;
            document.getElementById('porcentagem_entrada').value = 60;
            document.getElementById('porcentagem_valor').textContent = '60%';
            
            // Reset dos valores das simulações
            document.getElementById('parcela1').textContent = 'R$ 0,00';
            document.getElementById('entrada1').textContent = 'R$ 0,00';
            document.getElementById('financiar1').textContent = 'R$ 0,00';
            document.getElementById('porcentagem1').textContent = '0%';
            
            document.getElementById('parcela2').textContent = 'R$ 0,00';
            document.getElementById('entrada2').textContent = 'R$ 0,00';
            document.getElementById('financiar2').textContent = 'R$ 0,00';
            document.getElementById('porcentagem2').textContent = '0%';
            
            // Reset dos badges
            document.getElementById('comparisonBadge1').style.display = 'none';
            document.getElementById('comparisonBadge2').style.display = 'none';
            
            // Reset do popup
            document.getElementById('popupFinanciado1').textContent = 'R$ 0,00';
            document.getElementById('popupJurosTotais1').textContent = 'R$ 0,00';
            document.getElementById('popupValorTotal1').textContent = 'R$ 0,00';
            document.getElementById('popupCustoCredito1').textContent = '0%';
            
            document.getElementById('popupFinanciado2').textContent = 'R$ 0,00';
            document.getElementById('popupJurosTotais2').textContent = 'R$ 0,00';
            document.getElementById('popupValorTotal2').textContent = 'R$ 0,00';
            document.getElementById('popupCustoCredito2').textContent = '0%';
            
            document.getElementById('popupDiferencaParcela').textContent = 'R$ 0,00';
            document.getElementById('popupEconomiaTotal').textContent = 'R$ 0,00';
            
            // Remover erros de input
            document.querySelectorAll('.input-error').forEach(el => {
                el.classList.remove('input-error');
            });
            
            mostrarToast('Formulário limpo com sucesso!', 'info');
        }

        // Função para limpar TODAS as simulações
        function limparTodasSimulacoes() {
            if (confirm('Tem certeza que deseja limpar TODAS as simulações? Esta ação não pode ser desfeita.')) {
                // Limpa localStorage
                localStorage.removeItem('orcamentos_mototech');
                
                // Reseta variáveis
                orcamentos = [];
                orcamentosFiltrados = [];
                
                // Limpa formulário
                limparFormulario();
                
                // Limpa lista de orçamentos
                document.getElementById('orcamentosList').innerHTML = `
                    <div style="text-align: center; padding: 40px; color: var(--text-light);">
                        <i class="fas fa-inbox" style="font-size: 3rem; margin-bottom: 20px;"></i>
                        <p>Nenhum orçamento encontrado</p>
                    </div>
                `;
                
                // Atualiza dashboard
                atualizarDashboard();
                
                mostrarToast('Todas as simulações foram removidas! 🗑️', 'success');
            }
        }

        // Função para limpar todos os orçamentos
        function limparTodosOrcamentos() {
            if (confirm('Tem certeza que deseja limpar TODOS os orçamentos? Esta ação não pode ser desfeita.')) {
                // Limpa localStorage
                localStorage.removeItem('orcamentos_mototech');
                
                // Reseta variáveis
                orcamentos = [];
                orcamentosFiltrados = [];
                
                // Limpa lista de orçamentos
                document.getElementById('orcamentosList').innerHTML = `
                    <div style="text-align: center; padding: 40px; color: var(--text-light);">
                        <i class="fas fa-inbox" style="font-size: 3rem; margin-bottom: 20px;"></i>
                        <p>Nenhum orçamento encontrado</p>
                    </div>
                `;
                
                // Atualiza dashboard
                atualizarDashboard();
                
                mostrarToast('Todos os orçamentos foram removidos! 🗑️', 'success');
            }
        }

        // Função para carregar orçamentos
        async function carregarOrcamentos() {
            try {
                showLoading();
                
                // Tentar carregar do cache primeiro
                const cached = cache.get('orcamentos_mototech');
                if (cached) {
                    orcamentos = cached;
                } else {
                    // Carregar do localStorage
                    const dados = localStorage.getItem('orcamentos_mototech');
                    orcamentos = dados ? JSON.parse(dados) : [];
                    
                    // Salvar no cache
                    cache.set('orcamentos_mototech', orcamentos);
                }
                
                // Ordena por data (mais recente primeiro)
                orcamentos.sort((a, b) => new Date(b.data_criacao) - new Date(a.data_criacao));
                
                orcamentosFiltrados = [...orcamentos];
                renderizarOrcamentos();
                atualizarDashboard();
                
                hideLoading();
                
            } catch (error) {
                console.error('Erro ao carregar orçamentos:', error);
                mostrarToast('Erro ao carregar orçamentos!', 'error');
                hideLoading();
            }
        }

        // Função para renderizar orçamentos na lista
        function renderizarOrcamentos() {
            const container = document.getElementById('orcamentosList');
            container.innerHTML = '';
            
            if (orcamentosFiltrados.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: var(--text-light);">
                        <i class="fas fa-inbox" style="font-size: 3rem; margin-bottom: 20px;"></i>
                        <p>Nenhum orçamento encontrado</p>
                    </div>
                `;
                return;
            }
            
            orcamentosFiltrados.forEach(orcamento => {
                const item = document.createElement('div');
                item.className = 'orcamento-item';
                
                const statusClass = `status-${orcamento.status}`;
                const statusText = orcamento.status === 'aprovado' ? 'APROVADO' : 
                                 orcamento.status === 'rejeitado' ? 'REJEITADO' : 'PENDENTE';
                
                const pendenteIcon = orcamento.status === 'pendente' 
                    ? '<i class="fas fa-clock" style="margin-right: 5px;"></i>' 
                    : '';
                
                item.innerHTML = `
                    <div class="orcamento-header">
                        <div class="orcamento-cliente">${pendenteIcon}${orcamento.cliente || 'Cliente não informado'}</div>
                        <div class="orcamento-status ${statusClass}">${statusText}</div>
                    </div>
                    <div class="orcamento-details">
                        <div>
                            <small>Moto</small>
                            <div>${orcamento.marca} ${orcamento.modelo}</div>
                        </div>
                        <div>
                            <small>Valor</small>
                            <div class="orcamento-value">${formatarMoeda(orcamento.preco_moto)}</div>
                        </div>
                        <div>
                            <small>Parcelas</small>
                            <div>${orcamento.parcelas}x</div>
                        </div>
                        <div>
                            <small>Data</small>
                            <div>${formatarData(orcamento.data_criacao)}</div>
                        </div>
                    </div>
                    <div class="orcamento-actions">
                        <button class="action-btn view" onclick="abrirDetalhesOrcamento(${JSON.stringify(orcamento).replace(/"/g, '&quot;')})">
                            <i class="fas fa-eye"></i> Ver
                        </button>
                        <button class="action-btn delete" onclick="removerOrcamento(${orcamento.id}, event)">
                            <i class="fas fa-trash"></i> Remover
                        </button>
                    </div>
                `;
                
                // Se o orçamento estiver pendente, ainda permite abrir o modal de alteração
                if (orcamento.status === 'pendente') {
                    item.style.cursor = 'pointer';
                    item.addEventListener('click', function(e) {
                        // Só abre modal se não clicar nos botões
                        if (!e.target.closest('.orcamento-actions')) {
                            abrirModalStatus(orcamento);
                        }
                    });
                } else {
                    item.addEventListener('click', function(e) {
                        if (!e.target.closest('.orcamento-actions')) {
                            abrirDetalhesOrcamento(orcamento);
                        }
                    });
                }
                
                container.appendChild(item);
            });
        }

        // Função para remover orçamento específico
        function removerOrcamento(id, event) {
            // Evita que o clique propague para o item do orçamento
            if (event) {
                event.stopPropagation();
            }
            
            if (confirm('Tem certeza que deseja remover este orçamento? Esta ação não pode ser desfeita.')) {
                try {
                    // Encontrar índice do orçamento
                    const index = orcamentos.findIndex(o => o.id === id);
                    
                    if (index !== -1) {
                        // Salvar dados para exibir no toast
                        const orcamentoRemovido = orcamentos[index];
                        
                        // Remover do array
                        orcamentos.splice(index, 1);
                        
                        // Atualizar localStorage e cache
                        localStorage.setItem('orcamentos_mototech', JSON.stringify(orcamentos));
                        cache.set('orcamentos_mototech', orcamentos);
                        
                        // Atualizar lista de orçamentos
                        carregarOrcamentos();
                        
                        // Atualizar dashboard
                        atualizarDashboard();
                        
                        // Mostrar confirmação
                        mostrarToast(`Orçamento de ${orcamentoRemovido.cliente} removido com sucesso!`, 'success');
                    } else {
                        mostrarToast('Orçamento não encontrado!', 'error');
                    }
                } catch (error) {
                    console.error('Erro ao remover orçamento:', error);
                    mostrarToast('Erro ao remover orçamento!', 'error');
                }
            }
        }

        // Função para filtrar orçamentos
        function filtrarOrcamentos() {
            const status = document.getElementById('filterStatus').value;
            const search = document.getElementById('searchCliente').value.toLowerCase();
            
            orcamentosFiltrados = orcamentos.filter(orcamento => {
                const matchStatus = !status || orcamento.status === status;
                const matchSearch = !search || 
                    (orcamento.cliente && orcamento.cliente.toLowerCase().includes(search));
                
                return matchStatus && matchSearch;
            });
            
            renderizarOrcamentos();
        }

        // Função para abrir detalhes do orçamento
        function abrirDetalhesOrcamento(orcamento) {
            const detalhes = `
CLIENTE: ${orcamento.cliente}
TELEFONE: ${orcamento.telefone || 'Não informado'}
MOTO: ${orcamento.marca} ${orcamento.modelo}
PREÇO: ${formatarMoeda(orcamento.preco_moto)}
PARCELAS: ${orcamento.parcelas}x
JUROS: ${orcamento.juros_percentual || 2.5}%

1ª SIMULAÇÃO:
• Entrada: ${formatarMoeda(orcamento.entrada_simulacao1)} (${orcamento.entrada_porcentagem}%)
• Parcela: ${formatarMoeda(orcamento.parcela_simulacao1)}
• Financiado: ${formatarMoeda(orcamento.financiado_simulacao1)}

2ª SIMULAÇÃO:
• Entrada: ${formatarMoeda(orcamento.entrada_simulacao2)}
• Parcela: ${formatarMoeda(orcamento.parcela_simulacao2)}
• Financiado: ${formatarMoeda(orcamento.financiado_simulacao2)}

STATUS: ${orcamento.status.toUpperCase()}
DATA: ${formatarData(orcamento.data_criacao)}
            `;
            
            // Adicionar botões de ação se estiver pendente
            if (orcamento.status === 'pendente') {
                if (confirm(`${detalhes}\n\nDeseja alterar o status deste orçamento?`)) {
                    abrirModalStatus(orcamento);
                    return;
                }
            } else {
                alert(detalhes);
            }
        }

        // Função para abrir o modal de alteração de status
        function abrirModalStatus(orcamento) {
            if (orcamento.status !== 'pendente') {
                mostrarToast('Apenas orçamentos PENDENTES podem ter o status alterado!', 'warning');
                return;
            }
            
            orcamentoSelecionadoId = orcamento.id;
            
            // Preencher informações no modal
            document.getElementById('modalOrcamentoId').textContent = orcamento.id;
            document.getElementById('modalOrcamentoCliente').textContent = orcamento.cliente || 'Não informado';
            document.getElementById('modalOrcamentoModelo').textContent = `${orcamento.marca} ${orcamento.modelo}`.toUpperCase();
            document.getElementById('modalOrcamentoValor').textContent = formatarMoeda(orcamento.preco_moto);
            document.getElementById('modalOrcamentoEntrada').textContent = formatarMoeda(orcamento.entrada_simulacao1);
            document.getElementById('modalOrcamentoParcelas').textContent = `${orcamento.parcelas}x`;
            
            // Atualizar status atual
            const statusElement = document.getElementById('modalOrcamentoStatusAtual');
            statusElement.textContent = orcamento.status.toUpperCase();
            statusElement.className = `status-${orcamento.status}`;
            
            // Mostrar modal
            document.getElementById('statusModal').style.display = 'flex';
        }

        // Função para fechar o modal de status
        function closeStatusModal() {
            document.getElementById('statusModal').style.display = 'none';
            orcamentoSelecionadoId = null;
        }

        // Função para alterar o status do orçamento
        function alterarOrcamentoStatus(novoStatus) {
            if (!orcamentoSelecionadoId) return;
            
            // Encontrar o orçamento na lista
            const index = orcamentos.findIndex(o => o.id === orcamentoSelecionadoId);
            
            if (index !== -1) {
                // Atualizar status
                orcamentos[index].status = novoStatus;
                orcamentos[index].data_atualizacao = new Date().toISOString();
                
                // Atualizar localStorage e cache
                localStorage.setItem('orcamentos_mototech', JSON.stringify(orcamentos));
                cache.set('orcamentos_mototech', orcamentos);
                
                // Atualizar a lista de orçamentos
                carregarOrcamentos();
                
                // Atualizar dashboard
                atualizarDashboard();
                
                // Fechar modal
                closeStatusModal();
                
                // Mensagem de sucesso
                const mensagem = novoStatus === 'aprovado' 
                    ? `Orçamento #${orcamentoSelecionadoId} APROVADO com sucesso! ✅` 
                    : `Orçamento #${orcamentoSelecionadoId} REJEITADO! ❌`;
                
                mostrarToast(mensagem, novoStatus === 'aprovado' ? 'success' : 'error');
            }
        }

        // Função para atualizar dashboard
        function atualizarDashboard() {
            const totalVendas = orcamentos
                .filter(o => o.status === 'aprovado')
                .reduce((sum, o) => sum + (o.preco_moto || 0), 0);
            
            const totalSimulacoes = orcamentos.length;
            const aprovados = orcamentos.filter(o => o.status === 'aprovado').length;
            const taxaAprovacao = totalSimulacoes > 0 ? (aprovados / totalSimulacoes * 100) : 0;
            
            document.getElementById('totalVendas').textContent = formatarMoeda(totalVendas);
            document.getElementById('totalSimulacoes').textContent = totalSimulacoes;
            document.getElementById('taxaAprovacao').textContent = `${taxaAprovacao.toFixed(1)}%`;
        }

        // Função para exportar orçamentos
        function exportarOrcamentos() {
            if (orcamentos.length === 0) {
                mostrarToast('Não há orçamentos para exportar!', 'warning');
                return;
            }
            
            const csv = converterParaCSV(orcamentos);
            const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `orcamentos_mototech_${new Date().toISOString().split('T')[0]}.csv`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            
            mostrarToast('Orçamentos exportados com sucesso! 📁', 'success');
        }

        // Função para converter dados para CSV
        function converterParaCSV(dados) {
            const cabecalho = ['Cliente', 'Telefone', 'Marca', 'Modelo', 'Preço', 'Parcelas', 'Juros', 'Status', 'Data'];
            const linhas = dados.map(item => [
                item.cliente,
                item.telefone,
                item.marca,
                item.modelo,
                item.preco_moto,
                item.parcelas,
                item.juros_percentual || '2.5',
                item.status,
                formatarData(item.data_criacao)
            ]);
            
            return [cabecalho, ...linhas]
                .map(row => row.map(cell => `"${cell}"`).join(','))
                .join('\n');
        }

        // Função para formatar data
        function formatarData(dataString) {
            const data = new Date(dataString);
            return data.toLocaleDateString('pt-BR') + ' ' + data.toLocaleTimeString('pt-BR').substring(0, 5);
        }

        // Função para alternar entre tabs
        function openTab(tabName) {
            // Atualiza tabs
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Ativa tab selecionada
            event.target.classList.add('active');
            document.getElementById(`${tabName}-tab`).classList.add('active');
            
            // Se for a tab de orçamentos, carrega os dados
            if (tabName === 'orcamentos') {
                carregarOrcamentos();
            }
        }

        // =========================================================================
        // FUNÇÕES DO VELOCÍMETRO DA INTERNET
        // =========================================================================

        // Função para testar velocidade da internet
        async function testarVelocidadeInternet() {
            try {
                const refreshIcon = document.getElementById('speedRefreshIcon');
                const downloadEl = document.getElementById('downloadSpeed');
                const uploadEl = document.getElementById('uploadSpeed');
                const qualityDots = [
                    document.getElementById('qualityDot1'),
                    document.getElementById('qualityDot2'),
                    document.getElementById('qualityDot3'),
                    document.getElementById('qualityDot4'),
                    document.getElementById('qualityDot5')
                ];

                // Mostra que está testando
                refreshIcon.classList.add('fa-spin', 'testing');
                downloadEl.textContent = '...';
                uploadEl.textContent = '...';

                // Reset dos dots de qualidade
                qualityDots.forEach(dot => {
                    dot.classList.remove('active', 'good', 'medium', 'poor');
                });

                // Simulação de teste de velocidade
                await new Promise(resolve => setTimeout(resolve, 2000));

                // Gerar valores aleatórios para demonstração
                const downloadSpeed = Math.random() * 100 + 20; // 20-120 Mbps
                const uploadSpeed = Math.random() * 50 + 10; // 10-60 Mbps
                const ping = Math.random() * 50 + 10; // 10-60 ms

                // Atualizar display
                downloadEl.textContent = downloadSpeed.toFixed(1);
                uploadEl.textContent = uploadSpeed.toFixed(1);

                // Determinar qualidade da conexão
                let qualityLevel;
                if (downloadSpeed > 80 && uploadSpeed > 40) {
                    qualityLevel = 'excelente';
                } else if (downloadSpeed > 50 && uploadSpeed > 20) {
                    qualityLevel = 'boa';
                } else if (downloadSpeed > 20 && uploadSpeed > 10) {
                    qualityLevel = 'media';
                } else {
                    qualityLevel = 'ruim';
                }

                // Atualizar dots de qualidade
                qualityDots.forEach((dot, index) => {
                    if (index < getQualityDots(qualityLevel)) {
                        dot.classList.add('active');
                        dot.classList.add(getQualityClass(qualityLevel));
                    }
                });

                // Remover animação
                refreshIcon.classList.remove('fa-spin', 'testing');

                // Mostrar toast com resultados
                mostrarToast(`Velocidade testada: ${downloadSpeed.toFixed(1)} Mbps ↓ / ${uploadSpeed.toFixed(1)} Mbps ↑`, 'success');

                // Log para debug
                console.log(`Teste de velocidade: Download: ${downloadSpeed.toFixed(1)} Mbps, Upload: ${uploadSpeed.toFixed(1)} Mbps, Qualidade: ${qualityLevel}`);

            } catch (error) {
                console.error('Erro ao testar velocidade:', error);
                mostrarToast('Erro ao testar velocidade da internet!', 'error');
                
                // Restaurar valores
                document.getElementById('downloadSpeed').textContent = '0';
                document.getElementById('uploadSpeed').textContent = '0';
                document.getElementById('speedRefreshIcon').classList.remove('fa-spin', 'testing');
            }
        }

        // Função auxiliar para determinar quantidade de dots ativos
        function getQualityDots(quality) {
            switch(quality) {
                case 'excelente': return 5;
                case 'boa': return 4;
                case 'media': return 3;
                case 'ruim': return 2;
                default: return 1;
            }
        }

        // Função auxiliar para determinar classe de qualidade
        function getQualityClass(quality) {
            switch(quality) {
                case 'excelente':
                case 'boa': return 'good';
                case 'media': return 'medium';
                case 'ruim': return 'poor';
                default: return 'poor';
            }
        }

        // =========================================================================
        // FUNÇÕES DOS BOTÕES FLUTUANTES E MODAIS
        // =========================================================================

        // Função para abrir calculadora (sem código de acesso)
        function openCalculator() {
            document.getElementById('calculatorModal').style.display = 'flex';
            mostrarToast('Calculadora futurista aberta! 🧮', 'info');
        }

        // Função para fechar calculadora
        function closeCalculator() {
            document.getElementById('calculatorModal').style.display = 'none';
        }

        // Função para abrir modal de configurações
        function openConfigModal() {
            document.getElementById('configCode').value = '';
            document.getElementById('configMessage').textContent = '';
            document.getElementById('configModal').style.display = 'flex';
            document.getElementById('configCode').focus();
        }

        // Função para fechar modal de configurações
        function closeConfigModal() {
            document.getElementById('configModal').style.display = 'none';
        }

        // Função para abrir modal de gestão
        function openManagementModal() {
            document.getElementById('managementCode').value = '';
            document.getElementById('managementMessage').textContent = '';
            document.getElementById('managementModal').style.display = 'flex';
            document.getElementById('managementCode').focus();
        }

        // Função para fechar modal de gestão
        function closeManagementModal() {
            document.getElementById('managementModal').style.display = 'none';
        }

        // Função para fechar popup de configurações
        function closeConfigPopup() {
            document.getElementById('configPopup').style.display = 'none';
        }

        // Função para fechar popup de gestão
        function closeManagementPopup() {
            document.getElementById('managementPopup').style.display = 'none';
        }

        // Validar código de acesso para configurações
        function validateConfigCode() {
            const inputCode = document.getElementById('configCode').value;
            const messageElement = document.getElementById('configMessage');
            
            if (inputCode === ACCESS_CODE) {
                messageElement.textContent = 'Acesso autorizado!';
                messageElement.className = 'modal-message success';
                
                // Fechar modal e abrir popup
                setTimeout(() => {
                    closeConfigModal();
                    document.getElementById('configPopup').style.display = 'flex';
                    
                    // Atualizar valores no popup
                    document.getElementById('popupJuros').value = jurosPercentual;
                    
                    mostrarToast('Configurações acessadas com sucesso! ⚙️', 'success');
                }, 1000);
            } else {
                messageElement.textContent = 'Código incorreto. Tente novamente.';
                messageElement.className = 'modal-message error';
                
                // Limpar campo após erro
                setTimeout(() => {
                    document.getElementById('configCode').value = '';
                    messageElement.textContent = '';
                }, 2000);
            }
        }

        // Validar código de acesso para gestão
        function validateManagementCode() {
            const inputCode = document.getElementById('managementCode').value;
            const messageElement = document.getElementById('managementMessage');
            
            if (inputCode === ACCESS_CODE) {
                messageElement.textContent = 'Acesso autorizado!';
                messageElement.className = 'modal-message success';
                
                // Fechar modal e abrir popup
                setTimeout(() => {
                    closeManagementModal();
                    document.getElementById('managementPopup').style.display = 'flex';
                    
                    mostrarToast('Gestão acessada com sucesso! 📊', 'success');
                }, 1000);
            } else {
                messageElement.textContent = 'Código incorreto. Tente novamente.';
                messageElement.className = 'modal-message error';
                
                // Limpar campo após erro
                setTimeout(() => {
                    document.getElementById('managementCode').value = '';
                    messageElement.textContent = '';
                }, 2000);
            }
        }

        // Função para lidar com tecla Enter nos campos de código
        function handleCodeKeypress(event, type) {
            if (event.key === 'Enter') {
                if (type === 'config') {
                    validateConfigCode();
                } else if (type === 'management') {
                    validateManagementCode();
                }
            }
        }

        // Fechar modais ao clicar fora
        window.onclick = function(event) {
            if (event.target === document.getElementById('calculatorModal')) {
                closeCalculator();
            }
            if (event.target === document.getElementById('configModal')) {
                closeConfigModal();
            }
            if (event.target === document.getElementById('managementModal')) {
                closeManagementModal();
            }
            if (event.target === document.getElementById('configPopup')) {
                closeConfigPopup();
            }
            if (event.target === document.getElementById('managementPopup')) {
                closeManagementPopup();
            }
            if (event.target === document.getElementById('statusModal')) {
                closeStatusModal();
            }
            if (event.target === document.getElementById('loadingOverlay')) {
                // Não fecha o loading overlay
            }
        };

        // =========================================================================
        // FUNÇÕES DA CALCULADORA FUTURISTA
        // =========================================================================

        function appendToDisplay(value) {
            const display = document.getElementById('calcDisplay');
            const expression = document.getElementById('calcExpression');
            
            if (calcCurrentDisplay === '0' || calcResetDisplay) {
                calcCurrentDisplay = value;
                calcResetDisplay = false;
            } else {
                calcCurrentDisplay += value;
            }
            
            // Atualiza expressão
            if ('+-*/'.includes(value)) {
                calcExpression += calcCurrentDisplay.slice(0, -1) + ' ' + value + ' ';
                calcCurrentDisplay = '0';
            }
            
            display.textContent = calcCurrentDisplay;
            expression.textContent = calcExpression;
        }

        function clearDisplay() {
            calcCurrentDisplay = '0';
            calcExpression = '';
            document.getElementById('calcDisplay').textContent = calcCurrentDisplay;
            document.getElementById('calcExpression').textContent = calcExpression;
            calcResetDisplay = false;
        }

        function deleteLast() {
            if (calcCurrentDisplay.length > 1) {
                calcCurrentDisplay = calcCurrentDisplay.slice(0, -1);
            } else {
                calcCurrentDisplay = '0';
            }
            document.getElementById('calcDisplay').textContent = calcCurrentDisplay;
        }

        function calculate() {
            const display = document.getElementById('calcDisplay');
            const expression = document.getElementById('calcExpression');
            
            try {
                // Adiciona o número atual à expressão
                const fullExpression = calcExpression + calcCurrentDisplay;
                
                // Substituir × por * para avaliação
                let expressionToEval = fullExpression.replace(/×/g, '*');
                
                // Tratar porcentagem
                if (expressionToEval.includes('%')) {
                    expressionToEval = expressionToEval.replace(/(\d+)%/g, '($1/100)');
                }
                
                const result = eval(expressionToEval);
                calcCurrentDisplay = result.toString();
                calcExpression = '';
                display.textContent = calcCurrentDisplay;
                expression.textContent = fullExpression + ' =';
                calcResetDisplay = true;
                
                // Efeito visual
                display.style.animation = 'none';
                setTimeout(() => {
                    display.style.animation = 'resultGlow 2s infinite alternate';
                }, 10);
                
            } catch (error) {
                calcCurrentDisplay = 'Erro';
                calcExpression = '';
                display.textContent = calcCurrentDisplay;
                expression.textContent = '';
                calcResetDisplay = true;
            }
        }

        // =========================================================================
        // INICIALIZAÇÃO
        // =========================================================================

        document.addEventListener('DOMContentLoaded', function() {
            // Máscara para telefone
            const telefoneInput = document.getElementById('telefone');
            telefoneInput.addEventListener('input', function(e) {
                let value = e.target.value.replace(/\D/g, '');
                if (value.length > 11) value = value.substring(0, 11);
                
                if (value.length > 10) {
                    value = value.replace(/^(\d{2})(\d{5})(\d{4})$/, '($1) $2-$3');
                } else if (value.length > 6) {
                    value = value.replace(/^(\d{2})(\d{4})(\d{0,4})$/, '($1) $2-$3');
                } else if (value.length > 2) {
                    value = value.replace(/^(\d{2})(\d{0,5})$/, '($1) $2');
                } else if (value.length > 0) {
                    value = value.replace(/^(\d*)$/, '($1');
                }
                e.target.value = value;
            });
            
            // Máscara para preço
            const precoInput = document.getElementById('preco_moto');
            precoInput.addEventListener('blur', function() {
                const valor = parseFloat(this.value);
                if (!isNaN(valor)) {
                    this.value = valor.toFixed(2);
                }
            });
            
            // Event listeners para cálculo automático
            document.getElementById('juros').addEventListener('input', debounceCalculate);
            document.getElementById('parcelas').addEventListener('change', debounceCalculate);
            document.getElementById('preco_moto').addEventListener('input', debounceCalculate);
            document.getElementById('valor_entrada').addEventListener('input', validarEntradaCustomizada);
            
            // Carregar última simulação do cache
            const ultimaSimulacao = cache.get('ultima_simulacao');
            if (ultimaSimulacao && Date.now() - ultimaSimulacao.timestamp < 3600000) {
                // Restaurar valores
                document.getElementById('preco_moto').value = ultimaSimulacao.precoMoto;
                document.getElementById('parcelas').value = ultimaSimulacao.parcelas;
                document.getElementById('juros').value = ultimaSimulacao.juros;
                document.getElementById('porcentagem_entrada').value = ultimaSimulacao.porcentagemEntrada;
                document.getElementById('porcentagem_valor').textContent = `${ultimaSimulacao.porcentagemEntrada}%`;
                
                if (ultimaSimulacao.valorEntradaCustomizado) {
                    document.getElementById('valor_entrada').value = ultimaSimulacao.valorEntradaCustomizado;
                }
                
                // Restaurar variáveis globais
                porcentagemEntrada = ultimaSimulacao.porcentagemEntrada;
                valorEntradaCustomizado = ultimaSimulacao.valorEntradaCustomizado;
                jurosPercentual = ultimaSimulacao.juros;
                
                // Calcular simulações
                setTimeout(calcularSimulacoes, 100);
            }
            
            // Carrega dados iniciais
            carregarOrcamentos();
            
            // Testa velocidade da internet ao carregar
            setTimeout(() => {
                testarVelocidadeInternet();
            }, 1000);
            
            // Calcula simulações iniciais
            setTimeout(() => {
                if (!ultimaSimulacao) {
                    calcularSimulacoes();
                }
            }, 500);
            
            mostrarToast('Sistema MOTOTECH carregado com sucesso! 🚀', 'success');
            
            // Inicializar calculadora
            clearDisplay();
            
            // Adicionar suporte a gestos para mobile
            let startX, startY;
            document.addEventListener('touchstart', (e) => {
                startX = e.touches[0].clientX;
                startY = e.touches[0].clientY;
            });

            document.addEventListener('touchend', (e) => {
                const endX = e.changedTouches[0].clientX;
                const diffX = endX - startX;
                
                if (Math.abs(diffX) > 50) {
                    const tabs = document.querySelectorAll('.tab');
                    const activeIndex = Array.from(tabs).findIndex(tab => tab.classList.contains('active'));
                    
                    if (diffX > 0 && activeIndex > 0) {
                        // Swipe para direita - tab anterior
                        tabs[activeIndex - 1].click();
                    } else if (diffX < 0 && activeIndex < tabs.length - 1) {
                        // Swipe para esquerda - próxima tab
                        tabs[activeIndex + 1].click();
                    }
                }
            });
        });
    </script>
</body>
</html>